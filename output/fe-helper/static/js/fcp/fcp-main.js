baidu.namespace.register("baidu.fcphelper");baidu.fcphelper=(function(){var e=function(u){return'			<h3 class="rst-title">				<a href="#">'+u.title+'：					<span class="rst-count">'+u.count+'</span>				</a>			</h3>			<div class="rst-content">'+u.content+"</div>			"};var t=function(u,B,w){var z=[];var A=0;z.push("<table>");z.push('<thead><tr><td>序号（Num）</td><td class="td-content-title">&nbsp;</td><td class="td-content-content">描述（Description）</td></tr></thead><tbody>');var v=function(E,D){var C=A%2==0?"tr-content-even":"";z.push('<tr class="'+C+'"><th class="td-linenum" rowspan="2">'+(++A)+'</th><td class="td-content-title"><span class="-x-issue">问题</span></td><td class="td-content-content -c-x-issue">'+E+"</td></tr>");z.push('<tr class="'+C+'"><td class="td-content-title"><span class="-x-suggestion">建议</span></td><td class="td-content-content">'+D+"</td></tr>")};var y;for(var x=B;x<=w;x++){y=("0000"+x);y=u+"_"+y.substr(y.length-4);v(baidu.i18n.getMessage(y),baidu.i18n.getMessage(y+"_suggestion"))}z.push("</tbody></table>");return z.join("")};var q=function(v,z,u){var w=[];var x=0;w.push("<div>"+baidu.i18n.getMessage("msg0042",[document.cookie.getBytes()])+"。如下是和整个站点相关的cookie：</div><br />");w.push("<table>");w.push('<thead><tr><td>序号</td><td class="td-cookie-name">名称（name）</td><td class="td-cookie-value">值（value）</td><td class="td-cookie-domain">所在域（domain）</td><td class="td-cookie-expires">过期时间（expires）</td><td class="td-cookie-op">操作</td></tr></thead><tbody>');var y=new Date()-1;jQuery.each(v.cookies,function(B,A){x++;w.push('<tr><td class="td-cookie-linenum">'+(B+1)+'</td><td class="td-cookie-name">'+A.name+'</td><td class="td-cookie-value" id="td-cookie-value-"'+A.name+">"+A.value+'</td><td class="td-cookie-domain">'+A.domain+'</td><td class="td-cookie-expires">'+(A.expirationDate?new Date(A.expirationDate*1000).format("yyyy年MM月dd日 HH时mm分ss秒"):"-")+'</td><td class="td-cookie-op"><button class="fe-a-cookie-delete -f-a-c-d-'+y+' ui-button ui-widget ui-state-default ui-corner-all ui-button-text-only"><span class="ui-button-text">删除</span></button><input type="hidden" id="hid-url-'+A.name+'" value="'+A.url+'" /><input type="hidden" id="hid-domain-'+A.name+'" value="'+A.domain+'" /><input type="hidden" id="hid-storeId-'+A.name+'" value="'+A.storeId+'" /><input type="hidden" id="hid-expires-'+A.name+'" value="'+(A.expirationDate?A.expirationDate:"")+'" /></td></tr>')});w.push("</tbody></table>");u.push(e({title:z,count:x,content:w.join("")}));jQuery("#fe-helper-box .-f-a-c-d-"+y).live("click",function(E){var D=jQuery(this);var C=D.parent().parent();var B=C.children(".td-cookie-name").html().trim();var A=jQuery("#hid-storeId-"+B).val().trim();chrome.extension.sendMessage({type:MSG_TYPE.REMOVE_COOKIE,name:B,url:jQuery("#hid-url-"+B).val().trim(),storeId:A},function(I){var H=D.parent().parent().parent();var G=H.index(C)-1;var F=0;C.remove();H.find("td.td-cookie-linenum").each(function(J,K){jQuery(K).html((J+1));F++});H.parent().parent().prev().find(".rst-count").html(F)})})};var j=function(x,z,w){var A=[];var B=0;A.push("<table>");A.push('<thead><tr><td>序号（Num）</td><td class="td-content">描述（Description）</td></tr></thead><tbody>');var u=function(E){A.push('<tr><th class="td-linenum">'+ ++B+'</th><td class="td-content">'+E+"</td></tr>")};if(x.scriptTag.scriptBlock){u(baidu.i18n.getMessage("msg0033",[x.scriptTag.scriptBlock]))}if(x.scriptTag.scriptSrc){u(baidu.i18n.getMessage("msg0034",[x.scriptTag.scriptSrc]))}if(x.jsMinified.count>0){var D=[];jQuery.each(x.jsMinified.files,function(E,F){if(F.href=="#"){D.push(baidu.i18n.getMessage("msg0047",[F.fileName]))}else{D.push(baidu.i18n.getMessage("msg0062",[F.href,F.fileName]))}});u(baidu.i18n.getMessage("msg0045",[D.join("、")]))}if(x.tangram.length>0){var D=[];jQuery.each(x.tangram,function(E,F){D.push(F)});if(D.length==1){u(baidu.i18n.getMessage("msg0054",[D.join("")]))}else{u(baidu.i18n.getMessage("msg0055",[D.join("、")]))}}if(x.duplicatedFiles.length){var C=[];var y=[];var v=[];jQuery.each(x.duplicatedFiles,function(F,G){if(G.dupFiles){var E=[];jQuery.each(G.dupFiles,function(H,I){E.push(baidu.i18n.getMessage("msg0069",[I,I]))});C.push(baidu.i18n.getMessage("msg0070",[E.join("、")]))}else{y.push(baidu.i18n.getMessage("msg0068",[G.href,G.href,G.count]))}});if(y.length){v.push(baidu.i18n.getMessage("msg0066",['<div style="margin-left:30px;">'+y.join("")+"</div>"]))}if(C.length){v.push(baidu.i18n.getMessage("msg0067",['<div style="margin-left:30px;">'+C.join("")+"</div>"]))}u(v.join(""))}A.push("</tbody></table>");w.push(e({title:z,count:B,content:A.join("")}))};var i=function(w,A,v){var z=true;for(var u in w.HTMLBase.HTMLDeprecatedTag){z=false;break}if(z){return}var x=[];var y=0;x.push("<table>");x.push('<thead><tr><td>标签（Tag）</td><td class="td-content">描述（Description）</td></tr></thead><tbody>');jQuery.each(w.HTMLBase.HTMLDeprecatedTag,function(B,C){y++;x.push('<tr><th class="td-linenum">'+B+'</th><td class="td-content">'+baidu.i18n.getMessage("msg0004",[C])+baidu.i18n.getMessage("msg0005")+"</td></tr>")});x.push("</tbody></table>");v.push(e({title:A,count:y,content:x.join("")}))};var h=function(w,A,v){var z=true;for(var u in w.HTMLBase.HTMLDeprecatedAttribute){z=false;break}if(z){return}var x=[];var y=0;x.push("<table>");x.push('<thead><tr><td>属性（Attr）</td><td class="td-content">描述（Description）</td></tr></thead><tbody>');jQuery.each(w.HTMLBase.HTMLDeprecatedAttribute,function(B,C){y++;x.push('<tr><th class="td-linenum">'+B+'</th><td class="td-content"><span class="x-detail">'+(function(){var D=[];jQuery.each(C,function(F,E){D.push(baidu.i18n.getMessage("msg0007",[E,F]))});return D.join("")})()+baidu.i18n.getMessage("msg0005")+"</span></td></tr>")});x.push("</tbody></table>");v.push(e({title:A,count:y,content:x.join("")}))};var f=function(v,y,u){var x=v.LINK.notInHead;if(x.length==0){return}var w="";w="<div>"+baidu.i18n.getMessage("msg0021",[x.length,"head"])+"</div>";w+=(function(A){var z=["<table>"];z.push('<thead><tr><td>序号（Num）</td><td class="td-content">描述（Description）</td></tr></thead><tbody>');if(x.length){jQuery.each(A,function(B,C){z.push('<tr>						<th class="td-linenum">'+(B+1)+'</th>						<td class="td-content">'+C.outerHTML.replace(/</g,"&lt;").replace(/>/g,"&gt;")+"</td>					</tr>")})}z.push("</tbody></table>");return z.join("")})(x);u.push(e({title:y,count:x.length,content:w}))};var l=function(v,x,u){if(v.tagInclude.length==0){return}var w="";w+=(function(z){var y=["<table>"];y.push('<thead><tr><td>序号（Num）</td><td class="td-content">描述（Description）</td></tr></thead><tbody>');if(v.tagInclude.length>0){jQuery.each(z,function(B,A){y.push('<tr>						<th class="td-linenum">'+(B+1)+'</th>						<td class="td-content">'+baidu.i18n.getMessage("msg0035",[A.inline,A.block])+"</td>					</tr>")})}y.push("</tbody></table>");return y.join("")})(v.tagInclude);u.push(e({title:x,count:v.tagInclude.length,content:w}))};var p=function(v){var w=[];var y="<strong>混杂模式</strong>";var x="<em>标准模式</em>";var z=(v.documentMode.WebKit=="S")?x:y;if(v.documentMode.hasDocType){w.push(baidu.i18n.getMessage("msg0009"));if(v.documentMode.isUnusualDocType){w.push(baidu.i18n.getMessage("msg0010",[z,y]))}if(v.documentMode.hasConditionalCommentBeforeDTD||v.documentMode.hasCommentBeforeDTD){w.push(baidu.i18n.getMessage("msg0011",[z,y]))}if(v.documentMode.IE==v.documentMode.WebKit){w.push(baidu.i18n.getMessage("msg0012",[z]));if(v.documentMode.WebKit=="Q"){w.push(baidu.i18n.getMessage("msg0013"))}}else{if(!v.documentMode.isUnusualDocType){if(v.documentMode.IE){var u=(v.documentMode.IE=="Q")?y:x;var A=(v.documentMode.WebKit=="Q")?y:x;w.push(baidu.i18n.getMessage("msg0014",[u,A]));w.push(baidu.i18n.getMessage("msg0013"))}else{w.push(baidu.i18n.getMessage("msg0015"))}}else{w.push(baidu.i18n.getMessage("msg0013"))}}}else{w.push(baidu.i18n.getMessage("msg0016",[z]));w.push(baidu.i18n.getMessage("msg0013"))}return w.join("")};var r=function(w,B,v){var z=[];var A=0;z.push("<table>");z.push('<thead><tr><td>序号（Num）</td><td class="td-content">描述（Description）</td></tr></thead><tbody>');var u=function(C){z.push('<tr><th class="td-linenum">'+(++A)+'</th><td class="td-content">'+C+"</td></tr>")};u(p(w));u(baidu.i18n.getMessage("msg0028",[w.DOM.count]));u(baidu.i18n.getMessage("msg0063",[w.DOM.maxDepth.depth,w.DOM.maxDepth.xpath]));if(w.title.length==0){u(baidu.i18n.getMessage("msg0049")+baidu.i18n.getMessage("msg0052"))}else{if(w.title.length>1){u(baidu.i18n.getMessage("msg0051")+baidu.i18n.getMessage("msg0052"))}else{if(!w.title[0].isInHead){u(baidu.i18n.getMessage("msg0050")+baidu.i18n.getMessage("msg0052"))}}}if(w.imgTag.length>0){var y="";jQuery.each(w.imgTag,function(D,C){y="";y+=C.id?"#"+C.id:"";y+=y.className?"."+y.className.replace(/\s+/g,"."):"";y=y?y:C.outerHTML.replace(/</g,"&lt;").replace(/>/g,"&gt;");u(baidu.i18n.getMessage("msg0053",[y]))})}if(w.DOM.allComm.length){if(w.DOM.IECondComm.length){u(baidu.i18n.getMessage("msg0018",[w.DOM.IECondComm.length]))}if(w.DOM.FFNotSptComm.length){u(baidu.i18n.getMessage("msg0060",[w.DOM.FFNotSptComm.length]))}u(baidu.i18n.getMessage("msg0030",[w.DOM.allComm.length,w.DOM.allComm.join("").getBytes()])+baidu.i18n.getMessage("msg0019"))}if(w.ID.count){var x=[];jQuery.each(w.ID.ids,function(D,C){x.push(baidu.i18n.getMessage("msg0064",[D,C]))});u(baidu.i18n.getMessage("msg0026",[w.ID.count,x.join("，")]))}if(w.DOM.invalidInput.count){u(baidu.i18n.getMessage("msg0029",[w.DOM.invalidInput.count]))}if(!w.htmlMinified){u(baidu.i18n.getMessage("msg0043"))}if(w.unClosedTags.length>0){var y=[];jQuery.each(w.unClosedTags,function(C,D){y.push(baidu.i18n.getMessage("msg0046",[D]))});u(baidu.i18n.getMessage("msg0038",[y.join("、")]))}z.push("</tbody></table>");v.push(e({title:B,count:A,content:z.join("")}))};var k=function(v){var w=[baidu.i18n.getMessage("msg0039"),baidu.i18n.getMessage("msg0040"),baidu.i18n.getMessage("msg0041")];var u=function(y){var x=["<table>"];x.push('<thead><tr><td>序号（Num）</td><td class="td-content">选择器（CSS Selector）</td></tr></thead><tbody>');jQuery.each(y,function(z,A){x.push('<tr><th class="td-linenum">'+(z+1)+'</th><td class="td-content"><span class="x-selector">'+A.selector+'</span><span class="x-css-text">'+A.cssText+"</span></td></tr>")});x.push("</tbody></table>");return x.join("")};jQuery.each(v.styles,function(y,z){var x=[];jQuery.each(z.content,function(B,A){x.push(e({title:w[B],count:A.count,content:u(A.content)}))});baidu.fcptabs.addCssTab(z.path,x.join(""))})};var c=function(x,w){var y=[];var B=0;var z=0;y.push("<table>");y.push('<thead><tr><td>序号（Num）</td><td class="td-content">描述（Description）</td></tr></thead><tbody>');var v=function(C){y.push('<tr><th class="td-linenum">'+(++B)+'</th><td class="td-content">'+C+"</td></tr>")};if(x.backgroundImages.length){var u=[];var A=new Date()-1;jQuery.each(x.backgroundImages,function(C,D){u=['<div class="table-css-bg -t-c-b-'+A+'" style="display:none;">'];jQuery.each(D.bgImages,function(F,E){u.push("<div>"+E+"</div>")});u.push("</div>");v(baidu.i18n.getMessage("msg0057",[D.fileName,D.bgImages.length,A])+u.join(""));z+=D.bgImages.length});jQuery("#fe-helper-box .-x-expand-"+A).live("click",function(){var D=jQuery(this);var C=D.parent().next();if(C.css("display")=="none"){C.slideDown(300);D.html("收起")}else{C.slideUp(300);D.html("展开")}});jQuery("#fe-helper-box .-t-c-b-"+A+" div").live("mouseover",function(C){var D=jQuery("#fe-img-tootip");if(!D[0]){D=jQuery('<img id="fe-img-tootip" src="'+jQuery(this).html().trim()+'" alt="load image failed" />').appendTo("body")}else{D.attr("src",jQuery(this).html().trim())}D.css({top:C.pageY+20,left:C.pageX+20,"max-width":500,"max-height":500}).show()}).live("mouseout",function(C){var D=jQuery("#fe-img-tootip");D.hide()})}y.push("</tbody></table>");w.push(e({title:baidu.i18n.getMessage("msg0065"),count:z,content:y.join("")}))};var m=function(x){var A=[];var B=0;var w=[];A.push("<table>");A.push('<thead><tr><td>序号（Num）</td><td class="td-content">描述（Description）</td></tr></thead><tbody>');var u=function(E){A.push('<tr><th class="td-linenum">'+(++B)+'</th><td class="td-content">'+E+"</td></tr>")};if(x.duplicatedFiles.length){var C=[];var y=[];var v=[];jQuery.each(x.duplicatedFiles,function(F,G){if(G.dupFiles){var E=[];jQuery.each(G.dupFiles,function(H,I){E.push(baidu.i18n.getMessage("msg0069",[I,I]))});C.push(baidu.i18n.getMessage("msg0070",[E.join("、")]))}else{y.push(baidu.i18n.getMessage("msg0068",[G.href,G.href,G.count]))}});if(y.length){v.push(baidu.i18n.getMessage("msg0066",['<div style="margin-left:30px;">'+y.join("")+"</div>"]))}if(C.length){v.push(baidu.i18n.getMessage("msg0067",['<div style="margin-left:30px;">'+C.join("")+"</div>"]))}u(v.join(""))}if(x.cssMinified.count>0){var D=[];jQuery.each(x.cssMinified.files,function(E,F){if(F.href=="#"){D.push(baidu.i18n.getMessage("msg0047",[F.fileName]))}else{D.push(baidu.i18n.getMessage("msg0062",[F.href,F.fileName]))}});u(baidu.i18n.getMessage("msg0044",[D.join("、")]))}if(x.expressions.length){var z=[],D=0;jQuery.each(x.expressions,function(E,F){z.push(baidu.i18n.getMessage("msg0059",[F.fileName,F.count]));D+=F.count});u(baidu.i18n.getMessage("msg0058",[D,z.join("、")]))}A.push("</tbody></table>");w.push(e({title:baidu.i18n.getMessage("msg0048"),count:B,content:A.join("")}));c(x,w);baidu.fcptabs.addCssTab(baidu.i18n.getMessage("msg0048"),w.join(""))};var o=function(){baidu.html.detect(function(u){var v=[];i(u,baidu.i18n.getMessage("msg0006"),v);h(u,baidu.i18n.getMessage("msg0008"),v);f(u,baidu.i18n.getMessage("msg0022"),v);l(u,baidu.i18n.getMessage("msg0036"),v);r(u,baidu.i18n.getMessage("msg0020"),v);baidu.fcptabs.addHtmlTab(v.join(""))})};var b=function(){baidu.css.detect(function(u){k(u);m(u)})};var s=function(){baidu.js.detect(function(v){var u=[];q(v,baidu.i18n.getMessage("msg0031"),u);j(v,baidu.i18n.getMessage("msg0032"),u);baidu.fcptabs.addJavascriptTab(u.join(""))})};var a=function(){var u=function(v){return'<a class="-f-h-get-more-" href="#" onclick="return false;">'+v+"&gt;&gt;</a>"};jQuery(u("查看更多HTML帮助")).appendTo("#fe-helper-tab-html").click(function(x){baidu.log.track(LOG.fcp_detect_morehtml);if(!jQuery("#fe-helper-tab-HTML-issue-sug")[0]){baidu.fcptabs.addIssueSuggestionTab("HTML",t("html",1,42))}var v=jQuery("#fe-helper-main-tab>div");var w=v.index(jQuery("#fe-helper-tab-HTML-issue-sug"));jQuery("#fe-helper-main-tab").tabs("select",w)});jQuery(u("查看更多CSS帮助")).appendTo("#fe-helper-tab-css").click(function(x){baidu.log.track(LOG.fcp_detect_morecss);if(!jQuery("#fe-helper-tab-CSS-issue-sug")[0]){baidu.fcptabs.addIssueSuggestionTab("CSS",t("css",1,119))}var v=jQuery("#fe-helper-main-tab>div");var w=v.index(jQuery("#fe-helper-tab-CSS-issue-sug"));jQuery("#fe-helper-main-tab").tabs("select",w)});jQuery(u("查看更多Javascript帮助")).appendTo("#fe-helper-tab-js").click(function(x){baidu.log.track(LOG.fcp_detect_morejs);if(!jQuery("#fe-helper-tab-Javascript-issue-sug")[0]){baidu.fcptabs.addIssueSuggestionTab("Javascript",t("javascript",1,114))}var v=jQuery("#fe-helper-main-tab>div");var w=v.index(jQuery("#fe-helper-tab-Javascript-issue-sug"));jQuery("#fe-helper-main-tab").tabs("select",w)})};var d=function(){baidu.css.init();baidu.js.init()};var n=function(u){baidu.html.init(u)};var g=function(){baidu.fcptabs.createProgressBar();window.setTimeout(function(){o();b();s();a();baidu.fcptabs.updateProgressBar(100)},100)};return{initStaticFile:d,initHtml:n,detect:g}})();