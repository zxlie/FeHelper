!function(){var e={r:function(t){if(e[t].inited)return e[t].value;if("function"!=typeof e[t].value)return e[t].inited=!0,e[t].value;var n={exports:{}},r=e[t].value(null,n.exports,n);if(e[t].inited=!0,e[t].value=r,void 0!==r)return r;for(var o in n.exports)if(n.exports.hasOwnProperty(o))return e[t].inited=!0,e[t].value=n.exports,n.exports}};e[0]={value:function(t,n,r){var o=e.r(17),i=e.r(11),a=(new o.Marker).pipe(function(){var e=new o.Circle(6);this.addShape(e),this.setRef(6,0).setViewBox(-7,-7,14,14).setWidth(7).setHeight(7),this.dot=e,this.node.setAttribute("markerUnits","userSpaceOnUse")});i.register("arc",function(e,t,n,r,i){var s,u,c,h=e.getLayoutBox(),l=t.getLayoutBox(),d=Math.abs,f=[],g=h.x>l.x?"right":"left";e.getMinder().getPaper().addResource(a),s=new o.Point(l.cx,l.cy),u="left"==g?new o.Point(h.right+2,h.cy):new o.Point(h.left-2,h.cy),c=o.Vector.fromPoints(s,u),f.push("M",s),f.push("A",d(c.x),d(c.y),0,0,c.x*c.y>0?0:1,u),n.setMarker(a),a.dot.fill(i),n.setPathData(f)})}},e[1]={value:function(t,n,r){var o=e.r(17),i=e.r(11),a=(new o.Marker).pipe(function(){var e=new o.Circle(6);this.addShape(e),this.setRef(6,0).setViewBox(-7,-7,14,14).setWidth(7).setHeight(7),this.dot=e,this.node.setAttribute("markerUnits","userSpaceOnUse")});i.register("arc_tp",function(e,t,n,r,i){var s,u,c=e.getLayoutBox(),h=t.getLayoutBox(),l=e.getIndex(),d=t.getChildren()[l+1];e.getIndex()>0&&(h=t.getChildren()[l-1].getLayoutBox());Math.abs;var f=[];c.x,h.x;e.getMinder().getPaper().addResource(a),s=new o.Point(h.cx,h.cy),u=new o.Point(c.cx,c.cy);var g=Math.sqrt(Math.pow(s.x-u.x,2)+Math.pow(s.y-u.y,2));if(g=0==e.getIndex()?.4*g:g,o.Vector.fromPoints(s,u),f.push("M",s),f.push("A",g,g,0,0,1,u),n.setMarker(a),a.dot.fill(i),n.setPathData(f),d&&d.getConnection()){var m=d.getConnection(),p=d.getLayoutBox(),v=new o.Point(p.cx,p.cy),y=Math.sqrt(Math.pow(u.x-v.x,2)+Math.pow(u.y-v.y,2));(f=[]).push("M",u),f.push("A",y,y,0,0,1,v),m.setMarker(a),a.dot.fill(i),m.setPathData(f)}})}},e[2]={value:function(t,n,r){e.r(17);e.r(11).register("bezier",function(e,t,n){var r=t.getLayoutVertexOut(),o=e.getLayoutVertexIn(),i=t.getLayoutVectorOut().normalize(),a=Math.round,s=Math.abs,u=[];if(u.push("M",a(r.x),a(r.y)),s(i.x)>s(i.y)){var c=(o.x+r.x)/2;u.push("C",c,r.y,c,o.y,o.x,o.y)}else{var h=(o.y+r.y)/2;u.push("C",r.x,h,o.x,h,o.x,o.y)}n.setMarker(null),n.setPathData(u)})}},e[3]={value:function(t,n,r){e.r(17);e.r(11).register("fish-bone-master",function(e,t,n){var r=t.getLayoutVertexOut(),o=e.getLayoutVertexIn(),i=Math.abs,a=i(r.y-o.y),s=i(r.x-o.x),u=[];u.push("M",r.x,r.y),u.push("h",s-a),u.push("L",o.x,o.y),n.setMarker(null),n.setPathData(u)})}},e[4]={value:function(t,n,r){e.r(17);e.r(11).register("l",function(e,t,n){var r=t.getLayoutVertexOut(),o=e.getLayoutVertexIn(),i=t.getLayoutVectorOut(),a=[],s=Math.round,u=Math.abs;a.push("M",r.round()),u(i.x)>u(i.y)?a.push("H",s(o.x)):a.push("V",o.y),a.push("L",o),n.setPathData(a)})}},e[5]={value:function(t,n,r){e.r(17);e.r(11).register("poly",function(e,t,n,r){var o=t.getLayoutVertexOut(),i=e.getLayoutVertexIn(),a=t.getLayoutVectorOut().normalize(),s=Math.round,u=Math.abs,c=[];switch(c.push("M",s(o.x),s(o.y)),!0){case u(a.x)>u(a.y)&&a.x<0:c.push("h",-t.getStyle("margin-left")),c.push("v",i.y-o.y),c.push("H",i.x);break;case u(a.x)>u(a.y)&&a.x>=0:c.push("h",t.getStyle("margin-right")),c.push("v",i.y-o.y),c.push("H",i.x);break;case u(a.x)<=u(a.y)&&a.y<0:c.push("v",-t.getStyle("margin-top")),c.push("h",i.x-o.x),c.push("V",i.y);break;case u(a.x)<=u(a.y)&&a.y>=0:c.push("v",t.getStyle("margin-bottom")),c.push("h",i.x-o.x),c.push("V",i.y)}n.setMarker(null),n.setPathData(c)})}},e[6]={value:function(t,n,r){var o=e.r(17);e.r(11).register("under",function(e,t,n,r,i){var a,s,u,c,h=e.getLayoutBox(),l=t.getLayoutBox(),d=(Math.abs,[]),f=h.x>l.x?"right":"left",g=(e.getStyle("connect-radius"),h.bottom+3),m="sub"==t.getType()?l.bottom+3:l.cy;"right"==f?(a=new o.Point(l.right,m),s=new o.Point(h.left-10,g),u=new o.Point(h.right,g)):(a=new o.Point(l.left,m),s=new o.Point(h.right+10,g),u=new o.Point(h.left,g)),c=(a.x+s.x)/2,d.push("M",a),d.push("C",c,a.y,c,s.y,s),d.push("L",u),n.setMarker(null),n.setPathData(d)})}},e[7]={value:function(t,n,r){var o,i=e.r(17),a=e.r(19);-1!=location.href.indexOf("boxv")&&(Object.defineProperty(i.Box.prototype,"visualization",{get:function(){return o?o.setBox(this):null}}),a.registerInitHook(function(){this.on("paperrender",function(){(o=new i.Rect).fill("rgba(200, 200, 200, .5)"),o.stroke("orange"),this.getRenderContainer().addShape(o)})}))}},e[8]={value:function(t,n,r){var o=e.r(19),i={enableAnimation:!0,layoutAnimationDuration:300,viewAnimationDuration:100,zoomAnimationDuration:300},a={};o.registerInitHook(function(){this.setDefaultOptions(i),this.getOption("enableAnimation")||this.disableAnimation()}),o.prototype.enableAnimation=function(){for(var e in i)i.hasOwnProperty(e)&&this.setOption(a[e])},o.prototype.disableAnimation=function(){for(var e in i)i.hasOwnProperty(e)&&(a[e]=this.getOption(e),this.setOption(e,0))}}},e[9]={value:function(t,n,r){var o=e.r(17),i=(e.r(33),e.r(19)),a=(e.r(21),e.r(13)),s=o.createClass("Command",{constructor:function(){this._isContentChange=!0,this._isSelectionChange=!1},execute:function(e,t){throw new Error("Not Implement: Command.execute()")},setContentChanged:function(e){this._isContentChange=!!e},isContentChanged:function(){return this._isContentChange},setSelectionChanged:function(e){this._isSelectionChange=!!e},isSelectionChanged:function(){return this._isContentChange},queryState:function(e){return 0},queryValue:function(e){return 0},isNeedUndo:function(){return!0}});s.STATE_NORMAL=0,s.STATE_ACTIVE=1,s.STATE_DISABLED=-1,o.extendClass(i,{_getCommand:function(e){return this._commands[e.toLowerCase()]},_queryCommand:function(e,t,n){var r=this._getCommand(e);if(r){var o=r["query"+t];if(o)return o.apply(r,[this].concat(n))}return 0},queryCommandState:function(e){return this._queryCommand(e,"State",[].slice.call(arguments,1))},queryCommandValue:function(e){return this._queryCommand(e,"Value",[].slice.call(arguments,1))},execCommand:function(e){if(!e)return null;e=e.toLowerCase();var t,n,r,o=[].slice.call(arguments,1),i=this;return r={command:t=this._getCommand(e),commandName:e.toLowerCase(),commandArgs:o},!(!t||!~this.queryCommandState(e))&&(this._hasEnterExecCommand?(n=t.execute.apply(t,[i].concat(o)),this._hasEnterExecCommand||this._interactChange()):(this._hasEnterExecCommand=!0,this._fire(new a("beforeExecCommand",r,!0))||(this._fire(new a("preExecCommand",r,!1)),n=t.execute.apply(t,[i].concat(o)),this._fire(new a("execCommand",r,!1)),t.isContentChanged()&&this._firePharse(new a("contentchange")),this._interactChange()),this._hasEnterExecCommand=!1),void 0===n?null:n)}}),r.exports=s}},e[10]={value:function(t,n,r){e.r(33);function o(e,t){t(e),e.children&&e.children.forEach(function(e){o(e,t)})}return function(e){switch(e.version||(e.root?"1.4.0":"1.1.3")){case"1.1.3":!function(e){var t=e.data.currentstyle;delete e.data.currentstyle,"bottom"==t?(e.template="structure",e.theme="snow"):"default"==t&&(e.template="default",e.theme="classic"),o(e,function(e){var t=e.data;"PriorityIcon"in t&&(t.priority=t.PriorityIcon,delete t.PriorityIcon),"ProgressIcon"in t&&(t.progress=1+(t.ProgressIcon-1<<1),delete t.ProgressIcon),delete t.point,delete t.layout})}(e);case"1.2.0":case"1.2.1":!function(e){o(e,function(e){var t=e.data;delete t.layout_bottom_offset,delete t.layout_default_offset,delete t.layout_filetree_offset})}(e);case"1.3.0":case"1.3.1":case"1.3.2":case"1.3.3":case"1.3.4":case"1.3.5":!function(e){e.root={data:e.data,children:e.children},delete e.data,delete e.children}(e)}return e}}},e[11]={value:function(t,n,r){var o=e.r(17),i=e.r(33),a=e.r(20),s=e.r(19),u=e.r(21),c={};function h(e,t){c[e]=t}h("default",function(e,t,n){n.setPathData(["M",t.getLayoutVertexOut(),"L",e.getLayoutVertexIn()])}),o.extendClass(u,{getConnect:function(){return this.data.connect||"default"},getConnectProvider:function(){return c[this.getConnect()]||c.default},getConnection:function(){return this._connection||null}}),o.extendClass(s,{getConnectContainer:function(){return this._connectContainer},createConnect:function(e){if(!e.isRoot()){var t=new o.Path;e._connection=t,this._connectContainer.addShape(t),this.updateConnect(e)}},removeConnect:function(e){var t=this;e.traverse(function(e){t._connectContainer.removeShape(e._connection),e._connection=null})},updateConnect:function(e){var t=e._connection,n=e.parent;if(n&&t)if(n.isCollapsed())t.setVisible(!1);else{t.setVisible(!0);var r=e.getConnectProvider(),o=e.getStyle("connect-color")||"white",i=e.getStyle("connect-width")||2;t.stroke(o,i),r(e,n,t,i,o),i%2==0?t.setTranslate(.5,.5):t.setTranslate(0,0)}}}),a.register("Connect",{init:function(){this._connectContainer=(new o.Group).setId(i.uuid("minder_connect_group")),this.getRenderContainer().prependShape(this._connectContainer)},events:{nodeattach:function(e){this.createConnect(e.node)},nodedetach:function(e){this.removeConnect(e.node)},"layoutapply layoutfinish noderender":function(e){this.updateConnect(e.node)}}}),n.register=h}},e[12]={value:function(t,n,r){var o=e.r(17),i=(e.r(33),e.r(19)),a=(e.r(21),e.r(13)),s=e.r(10),u=e.r(25),c={};n.registerProtocol=function(e,t){for(var n in c[e]=t,c)c.hasOwnProperty(n)&&(c[n]=c[n],c[n].name=n)},n.getRegisterProtocol=function(e){return void 0===e?c:c[e]||null},o.extendClass(i,{setup:function(e){if("string"==typeof e&&(e=document.querySelector(e)),e){var t=e.getAttribute("minder-data-type");if(t in c){var n=e.textContent;e.textContent=null,this.renderTo(e),this.importData(t,n)}return this}},exportJson:function(){var e={root:function e(t){var n={};n.data=t.getData();var r=t.getChildren();n.children=[];for(var o=0;o<r.length;o++)n.children.push(e(r[o]));return n}(this.getRoot())};return e.template=this.getTemplate(),e.theme=this.getTheme(),e.version=i.version,JSON.parse(JSON.stringify(e))},Text2Children:function(e,t){if(e instanceof kityminder.Node){for(var n,r=[],o={},i=0,a=/^(\t|\x20{4})/,s=t.split(/\r|\n|\r\n/),u="",c=0,h=this;void 0!==(u=s[c++]);)if(!l(u=u.replace(/&nbsp;/g,"")))if(i=f(u),n=d(u),0===i)o={},r.push(n),o[0]=r[r.length-1];else{if(!o[i-1])throw new Error("Invalid local format");g(o[i-1],n),o[i]=n}!function e(t,n){for(var r=0,o=n.length;r<o;r++){var i=h.createNode(null,t);i.setData("text",n[r].data.text||""),e(i,n[r].children)}}(e,r),h.refresh()}function l(e){return""===e&&!/\S/.test(e)}function d(e){return{data:{text:e.replace(/^(\t|\x20{4})+/,"").replace(/(\t|\x20{4})+$/,"")},children:[]}}function f(e){for(var t=0;a.test(e);)e=e.replace(a,""),t++;return t}function g(e,t){e.children.push(t)}},exportNode:function(e){var t={};t.data=e.getData();var n=e.getChildren();t.children=[];for(var r=0;r<n.length;r++)t.children.push(this.exportNode(n[r]));return t},importNode:function(e,t){var n=t.data;for(var r in e.data={},n)e.setData(r,n[r]);for(var o=t.children||[],i=0;i<o.length;i++){var a=this.createNode(null,e);this.importNode(a,o[i])}return e},importJson:function(e){if(e){for(this._fire(new a("preimport",null,!1));this._root.getChildren().length;)this.removeNode(this._root.getChildren()[0]);return e=s(e),this.importNode(this._root,e.root),this.setTemplate(e.template||"default"),this.setTheme(e.theme||null),this.refresh(),this.fire("import"),this._firePharse({type:"contentchange"}),this._interactChange(),this}},exportData:function(e,t){var n,r;return n=this.exportJson(),!e||(r=c[e])&&r.encode?(this._fire(new a("beforeexport",{json:n,protocolName:e,protocol:r})),u.resolve(r.encode(n,this,t))):u.reject(new Error("Not supported protocol:"+e))},importData:function(e,t,n){var r,o=this;if(e&&(!(r=c[e])||!r.decode))return u.reject(new Error("Not supported protocol:"+e));var i={local:t,protocolName:e,protocol:r};return this._fire(new a("beforeimport",i)),u.resolve(r.decode(t,this,n)).then(function(e){return o.importJson(e),e})},decodeData:function(e,t,n){var r;if(e&&(!(r=c[e])||!r.decode))return u.reject(new Error("Not supported protocol:"+e));var o={local:t,protocolName:e,protocol:r};return this._fire(new a("beforeimport",o)),u.resolve(r.decode(t,this,n))}})}},e[13]={value:function(t,n,r){var o=e.r(17),i=(e.r(33),e.r(19)),a=o.createClass("MindEvent",{constructor:function(e,t,n){(t=t||{}).getType&&"ShapeEvent"==t.getType()?(this.kityEvent=t,this.originEvent=t.originEvent):t.target&&t.preventDefault?this.originEvent=t:o.Utils.extend(this,t),this.type=e,this._canstop=n||!1},getPosition:function(e){if(this.kityEvent)return e&&"minder"!=e?this.kityEvent.getPosition.call(this.kityEvent,e):this.kityEvent.getPosition(this.minder.getRenderContainer())},getTargetNode:function(){var e=this.kityEvent&&this.kityEvent.targetShape;if(!e)return null;for(;!e.minderNode&&e.container;)e=e.container;var t=e.minderNode;return t&&e.getOpacity()<1?null:t||null},stopPropagation:function(){this._stoped=!0},stopPropagationImmediately:function(){this._immediatelyStoped=!0,this._stoped=!0},shouldStopPropagation:function(){return this._canstop&&this._stoped},shouldStopPropagationImmediately:function(){return this._canstop&&this._immediatelyStoped},preventDefault:function(){this.originEvent.preventDefault()},isRightMB:function(){var e=!1;return!!this.originEvent&&("which"in this.originEvent?e=3==this.originEvent.which:"button"in this.originEvent&&(e=2==this.originEvent.button),e)},getKeyCode:function(){var e=this.originEvent;return e.keyCode||e.which}});i.registerInitHook(function(e){this._initEvents()}),o.extendClass(i,{_initEvents:function(){this._eventCallbacks={}},_resetEvents:function(){this._initEvents(),this._bindEvents()},_bindEvents:function(){this._paper.on("click dblclick mousedown contextmenu mouseup mousemove mouseover mousewheel DOMMouseScroll touchstart touchmove touchend dragenter dragleave drop",this._firePharse.bind(this)),window&&window.addEventListener("resize",this._firePharse.bind(this))},dispatchKeyEvent:function(e){this._firePharse(e)},_firePharse:function(e){var t,n,r;"DOMMouseScroll"==e.type&&(e.type="mousewheel",e.wheelDelta=e.originEvent.wheelDelta=-10*e.originEvent.detail,e.wheelDeltaX=e.originEvent.mozMovementX,e.wheelDeltaY=e.originEvent.mozMovementY),t=new a("before"+e.type,e,!0),this._fire(t)||(n=new a("pre"+e.type,e,!0),r=new a(e.type,e,!0),(this._fire(n)||this._fire(r))&&this._fire(new a("after"+e.type,e,!1)))},_interactChange:function(e){var t=this;t._interactScheduled||(setTimeout(function(){t._fire(new a("interactchange")),t._interactScheduled=!1},100),t._interactScheduled=!0)},_listen:function(e,t){(this._eventCallbacks[e]||(this._eventCallbacks[e]=[])).push(t)},_fire:function(e){e.minder=this;var t=this.getStatus(),n=this._eventCallbacks[e.type.toLowerCase()]||[];if(t&&(n=n.concat(this._eventCallbacks[t+"."+e.type.toLowerCase()]||[])),0!==n.length){this.getStatus();for(var r=0;r<n.length&&(n[r].call(this,e),!e.shouldStopPropagationImmediately());r++);return e.shouldStopPropagation()}},on:function(e,t){var n=this;return e.split(/\s+/).forEach(function(e){n._listen(e.toLowerCase(),t)}),this},off:function(e,t){var n,r,o,i,a=e.split(/\s+/);for(n=0;n<a.length;n++)if(o=this._eventCallbacks[a[n].toLowerCase()]){for(i=null,r=0;r<o.length;r++)o[r]==t&&(i=r);null!==i&&o.splice(i,1)}},fire:function(e,t){var n=new a(e,t);return this._fire(n),this}}),r.exports=a}},e[14]={value:function(t,n,r){var o=e.r(17),i=e.r(19);i.registerInitHook(function(){this.on("beforemousedown",function(e){this.focus(),e.preventDefault()}),this.on("paperrender",function(){this.focus()})}),o.extendClass(i,{focus:function(){this.isFocused()||(this._renderTarget.classList.add("focus"),this.renderNodeBatch(this.getSelectedNodes()));return this.fire("focus"),this},blur:function(){this.isFocused()&&(this._renderTarget.classList.remove("focus"),this.renderNodeBatch(this.getSelectedNodes()));return this.fire("blur"),this},isFocused:function(){var e=this._renderTarget;return e&&e.classList.contains("focus")}})}},e[15]={value:function(e,t,n){var r={Backspace:8,Tab:9,Enter:13,Shift:16,Control:17,Alt:18,CapsLock:20,Esc:27,Spacebar:32,PageUp:33,PageDown:34,End:35,Home:36,Insert:45,Left:37,Up:38,Right:39,Down:40,direction:{37:1,38:1,39:1,40:1},Del:46,NumLock:144,Cmd:91,CmdFF:224,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,"`":192,"=":187,"-":189,"/":191,".":190,controlKeys:{16:1,17:1,18:1,20:1,91:1,224:1},notContentChange:{13:1,9:1,33:1,34:1,35:1,36:1,16:1,17:1,18:1,20:1,91:1,37:1,38:1,39:1,40:1,113:1,114:1,115:1,144:1,27:1},isSelectedNodeKey:{37:1,38:1,39:1,40:1,13:1,9:1}};for(var o in r)r.hasOwnProperty(o)&&(r[o.toLowerCase()]=r[o]);var i="a".charCodeAt(0);"abcdefghijklmnopqrstuvwxyz".split("").forEach(function(e){r[e]=e.charCodeAt(0)-i+65});var a=9;do{r[a.toString()]=a+48}while(--a);n.exports=r}},e[16]={value:function(t,n,r){var o=e.r(17),i=(e.r(33),e.r(19));i.registerInitHook(function(e){this.setDefaultOptions({enableKeyReceiver:!0}),this.getOption("enableKeyReceiver")&&this.on("paperrender",function(){this._initKeyReceiver()})}),o.extendClass(i,{_initKeyReceiver:function(){if(!this._keyReceiver){var e=this._keyReceiver=document.createElement("input");e.classList.add("km-receiver"),this._renderTarget.appendChild(e);var t,n,r=this;t=e,n=function(t){switch(t.type){case"blur":r.blur();break;case"focus":r.focus();break;case"input":e.value=null}r._firePharse(t),t.preventDefault()},"keydown keyup keypress copy paste blur focus input".split(" ").forEach(function(e){t.addEventListener(e,n,!1)}),this.on("focus",function(){e.select(),e.focus()}),this.on("blur",function(){e.blur()}),this.isFocused()&&(e.select(),e.focus())}}})}},e[17]={value:function(e,t,n){n.exports=window.kity}},e[18]={value:function(t,n,r){var o,i=e.r(17),a=e.r(33),s=e.r(19),u=e.r(21),c=(e.r(13),e.r(9),{});var h=i.createClass("Layout",{doLayout:function(e,t){throw new Error("Not Implement: Layout.doLayout()")},align:function(e,t,n){var r=this;n=n||0,e.forEach(function(e){var o=r.getTreeBox([e]),i=e.getLayoutTransform();switch(t){case"left":return i.translate(n-o.left,0);case"right":return i.translate(n-o.right,0);case"top":return i.translate(0,n-o.top);case"bottom":return i.translate(0,n-o.bottom)}})},stack:function(e,t,n){var r=this,o=0;return n=n||function(e,t,n){return e.getStyle({x:"margin-right",y:"margin-bottom"}[n])+t.getStyle({x:"margin-left",y:"margin-top"}[n])},e.forEach(function(e,i,a){var s=r.getTreeBox([e]),u={x:s.width,y:s.height}[t],c={x:s.left,y:s.top}[t],h=e.getLayoutTransform();"x"==t?h.translate(o-c,0):h.translate(0,o-c),o+=u,a[i+1]&&(o+=n(e,a[i+1],t))}),o},move:function(e,t,n){e.forEach(function(e){e.getLayoutTransform().translate(t,n)})},getBranchBox:function(e){var t,n,r,o,a=new i.Box;for(t=0;t<e.length;t++)r=(n=e[t]).getLayoutTransform(),o=n.getContentBox(),a=a.merge(r.transformBox(o));return a},getTreeBox:function(e){var t,n,r,o,a=new i.Box;for(e instanceof Array||(e=[e]),t=0;t<e.length;t++)r=(n=e[t]).getLayoutTransform(),o=n.getContentBox(),n.isExpanded()&&n.children.length&&(o=o.merge(this.getTreeBox(n.children))),a=a.merge(r.transformBox(o));return a},getOrderHint:function(e){return[]}});h.register=function(e,t){c[e]=t,o=o||e},s.registerInitHook(function(e){this.refresh()}),a.extend(s,{getLayoutList:function(){return c},getLayoutInstance:function(e){var t=c[e];if(!t)throw new Error("Missing Layout: "+e);return new t}}),i.extendClass(u,{getLayout:function(){var e=this.getData("layout");return e=e||(this.isRoot()?o:this.parent.getLayout())},setLayout:function(e){return e&&("inherit"==e?this.setData("layout"):this.setData("layout",e)),this},layout:function(e){return this.setLayout(e).getMinder().layout(),this},getLayoutInstance:function(){return s.getLayoutInstance(this.getLayout())},getOrderHint:function(e){return this.parent.getLayoutInstance().getOrderHint(this)},getLayoutTransform:function(){return this._layoutTransform||new i.Matrix},getGlobalLayoutTransformPreview:function(){var e=this.parent?this.parent.getLayoutTransform():new i.Matrix,t=this.getLayoutTransform(),n=this.getLayoutOffset();return n&&(t=t.clone().translate(n.x,n.y)),e.merge(t)},getLayoutPointPreview:function(){return this.getGlobalLayoutTransformPreview().transformPoint(new i.Point)},getGlobalLayoutTransform:function(){return this._globalLayoutTransform?this._globalLayoutTransform:this.parent?this.parent.getGlobalLayoutTransform():new i.Matrix},setLayoutTransform:function(e){return this._layoutTransform=e,this},setGlobalLayoutTransform:function(e){return this.getRenderContainer().setMatrix(this._globalLayoutTransform=e),this},setVertexIn:function(e){this._vertexIn=e},setVertexOut:function(e){this._vertexOut=e},getVertexIn:function(){return this._vertexIn||new i.Point},getVertexOut:function(){return this._vertexOut||new i.Point},getLayoutVertexIn:function(){return this.getGlobalLayoutTransform().transformPoint(this.getVertexIn())},getLayoutVertexOut:function(){return this.getGlobalLayoutTransform().transformPoint(this.getVertexOut())},setLayoutVectorIn:function(e){return this._layoutVectorIn=e,this},setLayoutVectorOut:function(e){return this._layoutVectorOut=e,this},getLayoutVectorIn:function(){return this._layoutVectorIn||new i.Vector},getLayoutVectorOut:function(){return this._layoutVectorOut||new i.Vector},getLayoutBox:function(){return this.getGlobalLayoutTransform().transformBox(this.getContentBox())},getLayoutPoint:function(){return this.getGlobalLayoutTransform().transformPoint(new i.Point)},getLayoutOffset:function(){if(!this.parent)return new i.Point;var e=this.getData("layout_"+this.parent.getLayout()+"_offset");return e?new i.Point(e.x,e.y):new i.Point},setLayoutOffset:function(e){return this.parent?(this.setData("layout_"+this.parent.getLayout()+"_offset",e?{x:e.x,y:e.y}:void 0),this):this},hasLayoutOffset:function(){return!!this.getData("layout_"+this.parent.getLayout()+"_offset")},resetLayoutOffset:function(){return this.setLayoutOffset(null)},getLayoutRoot:function(){return this.isLayoutRoot()?this:this.parent.getLayoutRoot()},isLayoutRoot:function(){return this.getData("layout")||this.isRoot()}}),i.extendClass(s,{layout:function(){var e=this.getOption("layoutAnimationDuration");function t(e,n){e.isExpanded(),e.children.forEach(function(e){t(e,n)}),e.getLayoutInstance().doLayout(e,e.getChildren(),n)}this.getRoot().traverse(function(e){e.setLayoutTransform(null)}),t(this.getRoot(),1),t(this.getRoot(),2);var n=this;return this.applyLayoutResult(this.getRoot(),e,function(){setTimeout(function(){n.fire("layoutallfinish")},0)}),this.fire("layout")},refresh:function(){return this.getRoot().renderTree(),this.layout().fire("contentchange")._interactChange(),this},applyLayoutResult:function(e,t,n){e=e||this.getRoot();var r=this,o=e.getComplex();function a(){--o||n&&n()}function s(e,t){e.setGlobalLayoutTransform(t),r.fire("layoutapply",{node:e,matrix:t})}return o>200&&(t=0),function e(n,o){var u=n.getLayoutTransform().merge(o.clone()),c=n.getGlobalLayoutTransform()||new i.Matrix,h=n.getLayoutOffset();u.translate(h.x,h.y),u.m.e=Math.round(u.m.e),u.m.f=Math.round(u.m.f),n._layoutTimeline&&(n._layoutTimeline.stop(),n._layoutTimeline=null),t?n._layoutTimeline=new i.Animator(c,u,s).start(n,t,"ease").on("finish",function(){setTimeout(function(){s(n,u),r.fire("layoutfinish",{node:n,matrix:u}),a()},150)}):(s(n,u),r.fire("layoutfinish",{node:n,matrix:u}),a());for(var l=0;l<n.children.length;l++)e(n.children[l],u)}(e,e.parent?e.parent.getGlobalLayoutTransform():new i.Matrix),this}}),r.exports=h}},e[19]={value:function(t,n,r){var o=e.r(17),i=e.r(33),a=[],s=o.createClass("Minder",{constructor:function(e){this._options=i.extend({},e);for(var t,n=a.slice();n.length;)"function"==typeof(t=n.shift())&&t.call(this,this._options);this.fire("finishInitHook")}});s.version="1.4.43",s.registerInitHook=function(e){a.push(e)},r.exports=s}},e[20]={value:function(t,n,r){var o=e.r(17),i=e.r(33),a=e.r(19),s={};n.register=function(e,t){s[e]=t},a.registerInitHook(function(){this._initModules()}),o.extendClass(a,{_initModules:function(){var e,t,n,r,o,a,u,c=s,h=this._options.modules||i.keys(c);this._commands={},this._query={},this._modules={},this._rendererClasses={};for(e=0;e<h.length;e++)if(c[t=h[e]]&&(r="function"==typeof c[t]?c[t].call(this):c[t],this._modules[t]=r,r)){for(t in r.defaultOptions&&this.setDefaultOptions(r.defaultOptions),r.init&&r.init.call(this,this._options),o=r.commands)this._commands[t.toLowerCase()]=new o[t];if(a=r.events)for(n in a)this.on(n,a[n]);if(u=r.renderers)for(n in u)this._rendererClasses[n]=this._rendererClasses[n]||[],i.isArray(u[n])?this._rendererClasses[n]=this._rendererClasses[n].concat(u[n]):this._rendererClasses[n].push(u[n]);r.commandShortcutKeys&&this.addCommandShortcutKeys(r.commandShortcutKeys)}},_garbage:function(){for(this.clearSelect();this._root.getChildren().length;)this._root.removeChild(0)},destroy:function(){var e=this._modules;for(var t in this._resetEvents(),this._garbage(),e)e[t].destroy&&e[t].destroy.call(this)},reset:function(){var e=this._modules;for(var t in this._garbage(),e)e[t].reset&&e[t].reset.call(this)}})}},e[21]={value:function(t,n,r){var o=e.r(17),i=e.r(33),a=e.r(19),s=o.createClass("MinderNode",{constructor:function(e){this.parent=null,this.root=this,this.children=[],this.data={id:i.guid(),created:+new Date},this.initContainers(),i.isString(e)?this.setText(e):i.isObject(e)&&i.extend(this.data,e)},initContainers:function(){this.rc=(new o.Group).setId(i.uuid("minder_node")),this.rc.minderNode=this},isRoot:function(){return this.root===this},isLeaf:function(){return 0===this.children.length},getRoot:function(){return this.root||this},getParent:function(){return this.parent},getSiblings:function(){var e=this.parent.children,t=[],n=this;return e.forEach(function(e){e!=n&&t.push(e)}),t},getLevel:function(){for(var e=0,t=this.parent;t;)e++,t=t.parent;return e},getComplex:function(){var e=0;return this.traverse(function(){e++}),e},getType:function(e){return this.type=["root","main","sub"][Math.min(this.getLevel(),2)],this.type},isAncestorOf:function(e){for(var t=e.parent;t;){if(t==this)return!0;t=t.parent}return!1},getData:function(e){return e?this.data[e]:this.data},setData:function(e,t){if("object"==typeof e){var n=e;for(e in n)n.hasOwnProperty(e)&&(this.data[e]=n[e])}else this.data[e]=t;return this},setText:function(e){return this.data.text=e},getText:function(){return this.data.text||null},preTraverse:function(e,t){var n=this.getChildren();t||e(this);for(var r=0;r<n.length;r++)n[r].preTraverse(e)},postTraverse:function(e,t){for(var n=this.getChildren(),r=0;r<n.length;r++)n[r].postTraverse(e);t||e(this)},traverse:function(e,t){return this.postTraverse(e,t)},getChildren:function(){return this.children},getIndex:function(){return this.parent?this.parent.children.indexOf(this):-1},insertChild:function(e,t){void 0===t&&(t=this.children.length),e.parent&&e.parent.removeChild(e),e.parent=this,e.root=this.root,this.children.splice(t,0,e)},appendChild:function(e){return this.insertChild(e)},prependChild:function(e){return this.insertChild(e,0)},removeChild:function(e){var t,n=e;e instanceof s&&(n=this.children.indexOf(e)),n>=0&&((t=this.children.splice(n,1)[0]).parent=null,t.root=t)},clearChildren:function(){this.children=[]},getChild:function(e){return this.children[e]},getRenderContainer:function(){return this.rc},getCommonAncestor:function(e){return s.getCommonAncestor(this,e)},contains:function(e){return this==e||this.isAncestorOf(e)},clone:function(){var e=new s;return e.data=i.clone(this.data),this.children.forEach(function(t){e.appendChild(t.clone())}),e},compareTo:function(e){if(!i.comparePlainObject(this.data,e.data))return!1;if(!i.comparePlainObject(this.temp,e.temp))return!1;if(this.children.length!=e.children.length)return!1;for(var t=0;this.children[t];){if(!this.children[t].compareTo(e.children[t]))return!1;t++}return!0},getMinder:function(){return this.getRoot().minder}});s.getCommonAncestor=function(e,t){if(e instanceof Array)return s.getCommonAncestor.apply(this,e);switch(arguments.length){case 1:return e.parent||e;case 2:if(e.isAncestorOf(t))return e;if(t.isAncestorOf(e))return t;for(var n=e.parent;n&&!n.isAncestorOf(t);)n=n.parent;return n;default:return Array.prototype.reduce.call(arguments,function(e,t){return s.getCommonAncestor(e,t)},e)}},o.extendClass(a,{getRoot:function(){return this._root},setRoot:function(e){this._root=e,e.minder=this},getAllNode:function(){var e=[];return this.getRoot().traverse(function(t){e.push(t)}),e},getNodeById:function(e){return this.getNodesById([e])[0]},getNodesById:function(e){var t=this.getAllNode(),n=[];return t.forEach(function(t){-1!=e.indexOf(t.getData("id"))&&n.push(t)}),n},createNode:function(e,t,n){var r=new s(e);return this.fire("nodecreate",{node:r,parent:t,index:n}),this.appendNode(r,t,n),r},appendNode:function(e,t,n){return t&&t.insertChild(e,n),this.attachNode(e),this},removeNode:function(e){e.parent&&(e.parent.removeChild(e),this.detachNode(e),this.fire("noderemove",{node:e}))},attachNode:function(e){var t=this.getRenderContainer();e.traverse(function(e){e.attached=!0,t.addShape(e.getRenderContainer())}),t.addShape(e.getRenderContainer()),this.fire("nodeattach",{node:e})},detachNode:function(e){var t=this.getRenderContainer();e.traverse(function(e){e.attached=!1,t.removeShape(e.getRenderContainer())}),this.fire("nodedetach",{node:e})},getMinderTitle:function(){return this.getRoot().getText()}}),r.exports=s}},e[22]={value:function(t,n,r){var o=e.r(17),i=e.r(33),a=e.r(19);a.registerInitHook(function(e){this._defaultOptions={}}),o.extendClass(a,{setDefaultOptions:function(e){return i.extend(this._defaultOptions,e),this},getOption:function(e){return e?e in this._options?this._options[e]:this._defaultOptions[e]:i.extend({},this._defaultOptions,this._options)},setOption:function(e,t){this._options[e]=t}})}},e[23]={value:function(t,n,r){var o=e.r(17),i=e.r(33),a=e.r(19);a.registerInitHook(function(){this._initPaper()}),o.extendClass(a,{_initPaper:function(){this._paper=new o.Paper,this._paper._minder=this,this._paper.getNode().ondragstart=function(e){e.preventDefault()},this._paper.shapeNode.setAttribute("transform","translate(0.5, 0.5)"),this._addRenderContainer(),this.setRoot(this.createNode()),this._options.renderTo&&this.renderTo(this._options.renderTo)},_addRenderContainer:function(){this._rc=(new o.Group).setId(i.uuid("minder")),this._paper.addShape(this._rc)},renderTo:function(e){if("string"==typeof e&&(e=document.querySelector(e)),e){if("script"==e.tagName.toLowerCase()){var t=document.createElement("div");t.id=e.id,t.class=e.class,e.parentNode.insertBefore(t,e),e.parentNode.removeChild(e),e=t}e.classList.add("km-view"),this._paper.renderTo(this._renderTarget=e),this._bindEvents(),this.fire("paperrender")}return this},getRenderContainer:function(){return this._rc},getPaper:function(){return this._paper},getRenderTarget:function(){return this._renderTarget}})}},e[24]={value:function(t,n,r){var o=e.r(17),i=e.r(19);function a(e,t){var n=t.path.split("/");n.shift();var r,o=n.shift();if("root"==o){var i,a,s=n.indexOf("data");if(s>-1){o="data";var u=n.splice(s+1);t.dataPath=u}else o="node";for(r=e.getRoot();i=n.shift();)"children"!=i&&(void 0!==a&&(r=r.getChild(a)),a=+i);t.index=a,t.node=r}switch(t.express=[o,t.op].join(".")){case"theme.replace":e.useTheme(t.value);break;case"template.replace":e.useTemplate(t.value);break;case"node.add":(function e(t,n,r,o){return r=t.createNode(n.data,r,o),n.children.forEach(function(n,o){e(t,n,r,o)}),r})(e,t.value,t.node,t.index).renderTree(),e.layout();break;case"node.remove":e.removeNode(t.node.getChild(t.index)),e.layout();break;case"data.add":case"data.replace":case"data.remove":var c,h=t.node.data;for(n=t.dataPath.slice();h&&n.length>1;)(c=n.shift())in h?h=h[c]:"remove"!=t.op&&(h=h[c]={});h&&(h[c=n.shift()]=t.value),"expandState"==c?r.renderTree():r.render(),e.layout()}e.fire("patch",{patch:t})}o.extendClass(i,{applyPatches:function(e){for(var t=0;t<e.length;t++)a(this,e[t]);return this.fire("contentchange"),this}})}},e[25]={value:function(e,t,n){var r=function(e){if(!(this instanceof r))return new r(e);this.id="Thenable/1.0.7",this.state=0,this.fulfillValue=void 0,this.rejectReason=void 0,this.onFulfilled=[],this.onRejected=[],"function"==typeof e&&e.call(this,this.fulfill.bind(this),this.reject.bind(this))};r.prototype={fulfill:function(e){return o(this,1,"fulfillValue",e)},reject:function(e){return o(this,2,"rejectReason",e)},then:function(e,t){var n=new r;return this.onFulfilled.push(s(e,n,"fulfill")),this.onRejected.push(s(t,n,"reject")),i(this),n}},r.all=function(e){return new r(function(t,n){var r=e.length,o=0,i=0,a=[];for(0===r&&t(a);o<r;)e[o].then(function(e){a.push(e),++i===r&&t(a)},function(e){n(e)}),o++})};var o=function(e,t,n,r){return 0===e.state&&(e.state=t,e[n]=r,i(e)),e},i=function(e){1===e.state?a(e,"onFulfilled",e.fulfillValue):2===e.state&&a(e,"onRejected",e.rejectReason)},a=function(e,t,n){if(0!==e[t].length){var r=e[t];e[t]=[];var o=function(){for(var e=0;e<r.length;e++)r[e](n)};"object"==typeof process&&"function"==typeof process.nextTick?process.nextTick(o):"function"==typeof setImmediate?setImmediate(o):setTimeout(o,0)}},s=function(e,t,n){return function(o){if("function"!=typeof e)t[n].call(t,o);else{var i;try{i=o instanceof r?o.then(e):e(o)}catch(e){return void t.reject(e)}u(t,i)}}},u=function(e,t){if(e!==t){var n;if("object"==typeof t&&null!==t||"function"==typeof t)try{n=t.then}catch(t){return void e.reject(t)}if("function"!=typeof n)e.fulfill(t);else{var r=!1;try{n.call(t,function(n){r||(r=!0,n===t?e.reject(new TypeError("circular thenable chain")):u(e,n))},function(t){r||(r=!0,e.reject(t))})}catch(t){r||e.reject(t)}}}else e.reject(new TypeError("cannot resolve promise with itself"))};r.resolve=function(e){return new r(function(t){t(e)})},r.reject=function(e){return new r(function(t,n){n(e)})},n.exports=r}},e[26]={value:function(t,n,r){var o=e.r(17),i=e.r(19);e.r(13);i.registerInitHook(function(e){e.readOnly&&this.setDisabled()}),o.extendClass(i,{disable:function(){var e=this;e.bkqueryCommandState=e.queryCommandState,e.bkqueryCommandValue=e.queryCommandValue,e.queryCommandState=function(t){var n=this._getCommand(t);return n&&n.enableReadOnly?e.bkqueryCommandState.apply(e,arguments):-1},e.queryCommandValue=function(t){var n=this._getCommand(t);return n&&n.enableReadOnly?e.bkqueryCommandValue.apply(e,arguments):null},this.setStatus("readonly"),e._interactChange()},enable:function(){var e=this;e.bkqueryCommandState&&(e.queryCommandState=e.bkqueryCommandState,delete e.bkqueryCommandState),e.bkqueryCommandValue&&(e.queryCommandValue=e.bkqueryCommandValue,delete e.bkqueryCommandValue),this.setStatus("normal"),e._interactChange()}})}},e[27]={value:function(t,n,r){var o=e.r(17),i=e.r(19),a=e.r(21),s=o.createClass("Renderer",{constructor:function(e){this.node=e},create:function(e){throw new Error("Not implement: Renderer.create()")},shouldRender:function(e){return!0},watchChange:function(e){void 0===this.watchingData||this.watchingData,this.watchingData=e},shouldDraw:function(e){return!0},update:function(e,t,n){return this.shouldDraw()&&this.draw(e,t),this.place(e,t,n)},draw:function(e,t){throw new Error("Not implement: Renderer.draw()")},place:function(e,t,n){throw new Error("Not implement: Renderer.place()")},getRenderShape:function(){return this._renderShape||null},setRenderShape:function(e){this._renderShape=e}});o.extendClass(i,function(){function e(e,t){var n=[];["center","left","right","top","bottom","outline","outside"].forEach(function(e){var r="before"+e,o="after"+e;t[r]&&(n=n.concat(t[r])),t[e]&&(n=n.concat(t[e])),t[o]&&(n=n.concat(t[o]))}),e._renderers=n.map(function(t){return new t(e)})}return{renderNodeBatch:function(t){var n,r,i,a,s,u=this._rendererClasses,c=[];if(t.length){for(i=0;i<t.length;i++)(s=t[i])._renderers||e(s,u),s._contentBox=new o.Box,this.fire("beforerender",{node:s});for(n=t[0]._renderers.length,r=0;r<n;r++){for(i=0;i<t.length;i++)"function"==typeof c[i]&&(c[i]=c[i]()),c[i]instanceof o.Box||(c[i]=new o.Box(c[i]));for(i=0;i<t.length;i++)a=(s=t[i])._renderers[r],c[i]&&(s._contentBox=s._contentBox.merge(c[i]),a.contentBox=c[i]),a.shouldRender(s)?(a.getRenderShape()||(a.setRenderShape(a.create(s)),a.bringToBack?s.getRenderContainer().prependShape(a.getRenderShape()):s.getRenderContainer().appendShape(a.getRenderShape())),a.getRenderShape().setVisible(!0),c[i]=a.update(a.getRenderShape(),s,s._contentBox)):a.getRenderShape()&&(a.getRenderShape().setVisible(!1),c[i]=null)}for(i=0;i<t.length;i++)this.fire("noderender",{node:t[i]})}},renderNode:function(t){var n,r=this._rendererClasses;t._renderers||e(t,r),this.fire("beforerender",{node:t}),t._contentBox=new o.Box,t._renderers.forEach(function(e){e.shouldRender(t)?(e.getRenderShape()||(e.setRenderShape(e.create(t)),e.bringToBack?t.getRenderContainer().prependShape(e.getRenderShape()):t.getRenderContainer().appendShape(e.getRenderShape())),e.getRenderShape().setVisible(!0),"function"==typeof(n=e.update(e.getRenderShape(),t,t._contentBox))&&(n=n()),n&&(t._contentBox=t._contentBox.merge(n),e.contentBox=n)):e.getRenderShape()&&e.getRenderShape().setVisible(!1)}),this.fire("noderender",{node:t})}}}()),o.extendClass(a,{render:function(){if(this.attached)return this.getMinder().renderNode(this),this},renderTree:function(){if(this.attached){var e=[];return this.traverse(function(t){e.push(t)}),this.getMinder().renderNodeBatch(e),this}},getRenderer:function(e){var t=this._renderers;if(!t)return null;for(var n=0;n<t.length;n++)if(t[n].getType()==e)return t[n];return null},getContentBox:function(){return this.parent&&this.parent.isCollapsed()?new o.Box:this._contentBox||new o.Box},getRenderBox:function(e,t){var n=e&&this.getRenderer(e),r=n?n.contentBox:this.getContentBox();return o.Matrix.getCTM(this.getRenderContainer(),t||"paper").transformBox(r)}}),r.exports=s}},e[28]={value:function(t,n,r){var o=e.r(17),i=e.r(33),a=e.r(19),s=e.r(21);a.registerInitHook(function(){this._initSelection()}),o.extendClass(a,{_initSelection:function(){this._selectedNodes=[]},renderChangedSelection:function(e){var t=this.getSelectedNodes(),n=[];for(t.forEach(function(t){-1==e.indexOf(t)&&n.push(t)}),e.forEach(function(e){-1==t.indexOf(e)&&n.push(e)}),n.length&&(this._interactChange(),this.fire("selectionchange"));n.length;)n.shift().render()},getSelectedNodes:function(){return this._selectedNodes},getSelectedNode:function(){return this.getSelectedNodes()[0]||null},removeAllSelectedNodes:function(){var e=this._selectedNodes.splice(0);return this._selectedNodes=[],this.renderChangedSelection(e),this.fire("selectionclear")},removeSelectedNodes:function(e){var t=this,n=this._selectedNodes.slice(0);return(e=i.isArray(e)?e:[e]).forEach(function(e){var n;-1!==(n=t._selectedNodes.indexOf(e))&&t._selectedNodes.splice(n,1)}),this.renderChangedSelection(n),this},select:function(e,t){var n=this.getSelectedNodes().slice(0);t&&(this._selectedNodes=[]);var r=this;return(e=i.isArray(e)?e:[e]).forEach(function(e){-1===r._selectedNodes.indexOf(e)&&r._selectedNodes.unshift(e)}),this.renderChangedSelection(n),this},selectById:function(e,t){e=i.isArray(e)?e:[e];var n=this.getNodesById(e);return this.select(n,t)},toggleSelect:function(e){return i.isArray(e)?e.forEach(this.toggleSelect.bind(this)):e.isSelected()?this.removeSelectedNodes(e):this.select(e),this},isSingleSelect:function(){return 1==this._selectedNodes.length},getSelectedAncestors:function(e){var t,n=this.getSelectedNodes().slice(0),r=[],o=n.indexOf(this.getRoot());function i(e,t){for(var n=e.length-1;n>=0;--n)if(e[n].isAncestorOf(t))return!0;return!1}for(~o&&!e&&n.splice(o,1),n.sort(function(e,t){return e.getLevel()-t.getLevel()});t=n.pop();)i(n,t)||r.push(t);return r}}),o.extendClass(s,{isSelected:function(){var e=this.getMinder();return e&&-1!=e.getSelectedNodes().indexOf(this)}})}},e[29]={value:function(t,n,r){var o=e.r(17),i=e.r(33),a=e.r(15),s=e.r(19),u=e.r(13);function c(e){var t=0;return"string"==typeof e?e.toLowerCase().split(/\+\s*/).forEach(function(e){switch(e){case"ctrl":case"cmd":t|=4096;break;case"alt":t|=8192;break;case"shift":t|=16384;break;default:t|=a[e]}}):((e.ctrlKey||e.metaKey)&&(t|=4096),e.altKey&&(t|=8192),e.shiftKey&&(t|=16384),t|=e.keyCode),t}o.extendClass(u,{isShortcutKey:function(e){var t=this.originEvent;return!!t&&c(e)==c(t)}}),s.registerInitHook(function(){this._initShortcutKey()}),o.extendClass(s,{_initShortcutKey:function(){this._bindShortcutKeys()},_bindShortcutKeys:function(){var e=this._shortcutKeys={};this.on("keydown",function(t){for(var n in e)if(e.hasOwnProperty(n)&&t.isShortcutKey(n)){var r=e[n];if(r.__statusCondition&&r.__statusCondition!=this.getStatus())return;r(),t.preventDefault()}})},addShortcut:function(e,t){var n=this._shortcutKeys;e.split(/\|\s*/).forEach(function(e){var r,o=e.split("::");o.length>1&&(e=o[1],r=o[0],t.__statusCondition=r),n[e]=t})},addCommandShortcutKeys:function(e,t){var n=this._commandShortcutKeys||(this._commandShortcutKeys={}),r={};t?r[e]=t:r=e;var o=this;i.each(r,function(e,t){n[t]=e,o.addShortcut(e,function(){-1!==o.queryCommandState(t)&&o.execCommand(t)})})},getCommandShortcutKey:function(e){var t=this._commandShortcutKeys;return t&&t[e]||null},supportClipboardEvent:function(e){return!!e.ClipboardEvent}(window)})}},e[30]={value:function(t,n,r){var o=e.r(17),i=e.r(19),a=~window.location.href.indexOf("status"),s=~window.location.href.indexOf("trace");i.registerInitHook(function(){this._initStatus()}),o.extendClass(i,{_initStatus:function(){this._status="normal",this._rollbackStatus="normal"},setStatus:function(e,t){return"readonly"!=this._status||t?(e!=this._status&&(this._rollbackStatus=this._status,this._status=e,this.fire("statuschange",{lastStatus:this._rollbackStatus,currentStatus:this._status}),a&&(console.log(window.event.type,this._rollbackStatus,"->",this._status),s&&console.trace())),this):this},rollbackStatus:function(){this.setStatus(this._rollbackStatus)},getRollbackStatus:function(){return this._rollbackStatus},getStatus:function(){return this._status}})}},e[31]={value:function(t,n,r){var o,i,a,s=e.r(17),u=e.r(33),c=e.r(19),h=e.r(9),l=e.r(21),d=e.r(20),f={};n.register=function(e,t){f[e]=t},u.extend(c,{getTemplateList:function(){return f}}),s.extendClass(c,(o=c.prototype.getTheme,{useTemplate:function(e,t){this.setTemplate(e),this.refresh(t||800)},getTemplate:function(){return this._template||"default"},setTemplate:function(e){this._template=e||null},getTemplateSupport:function(e){var t=f[this.getTemplate()];return t&&t[e]},getTheme:function(e){return(this.getTemplateSupport("getTheme")||o).call(this,e)}})),s.extendClass(l,(i=l.prototype.getLayout,a=l.prototype.getConnect,{getLayout:function(){return(this.getMinder().getTemplateSupport("getLayout")||i).call(this,this)},getConnect:function(){return(this.getMinder().getTemplateSupport("getConnect")||a).call(this,this)}})),d.register("TemplateModule",{commands:{template:s.createClass("TemplateCommand",{base:h,execute:function(e,t){e.useTemplate(t),e.execCommand("camera")},queryValue:function(e){return e.getTemplate()||"default"}})}})}},e[32]={value:function(t,n,r){var o=e.r(17),i=e.r(33),a=e.r(19),s=e.r(21),u=e.r(20),c=e.r(9),h={left:function(e){return 3 in e&&e[3]||1 in e&&e[1]||e[0]},right:function(e){return 1 in e&&e[1]||e[0]},top:function(e){return e[0]},bottom:function(e){return 2 in e&&e[2]||e[0]}},l={};n.register=function(e,t){l[e]=t},i.extend(a,{getThemeList:function(){return l}}),o.extendClass(a,{useTheme:function(e){return this.setTheme(e),this.refresh(800),!0},setTheme:function(e){if(e&&!l[e])throw new Error("Theme "+e+" not exists!");var t=this._theme;this._theme=e||null;var n=this.getRenderTarget();return n&&(n.classList.remove("km-theme-"+t),e&&n.classList.add("km-theme-"+e),n.style.background=this.getStyle("background")),this.fire("themechange",{theme:e}),this},getTheme:function(e){return this._theme||this.getOption("defaultTheme")||"fresh-blue"},getThemeItems:function(e){this.getTheme(e);return l[this.getTheme(e)]},getStyle:function(e,t){var n,r,o,a,s=this.getThemeItems(t);if(e in s)return s[e];if((n=e.split("-")).length<2)return null;if(r=n.pop(),(e=n.join("-"))in s){if(o=s[e],i.isArray(o)&&(a=h[r]))return a(o);if(!isNaN(o))return o}return null},getNodeStyle:function(e,t){var n=this.getStyle(e.getType()+"-"+t,e);return null!==n?n:this.getStyle(t,e)}}),o.extendClass(s,{getStyle:function(e){return this.getMinder().getNodeStyle(this,e)}}),u.register("Theme",{defaultOptions:{defaultTheme:"fresh-blue"},commands:{theme:o.createClass("ThemeCommand",{base:c,execute:function(e,t){return e.useTheme(t)},queryValue:function(e){return e.getTheme()||"default"}})}}),a.registerInitHook(function(){this.setTheme()})}},e[33]={value:function(t,n){var r=e.r(17),o={};n.extend=r.Utils.extend.bind(r.Utils),n.each=r.Utils.each.bind(r.Utils),n.uuid=function(e){return o[e]=o[e]?o[e]+1:1,e+o[e]},n.guid=function(){return(1e6*+new Date+Math.floor(1e6*Math.random())).toString(36)},n.trim=function(e){return e.replace(/(^[ \t\n\r]+)|([ \t\n\r]+$)/g,"")},n.keys=function(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(n);return t},n.clone=function(e){return JSON.parse(JSON.stringify(e))},n.comparePlainObject=function(e,t){return JSON.stringify(e)==JSON.stringify(t)},n.encodeHtml=function(e,t){return e?e.replace(t||/[&<">'](?:(amp|lt|quot|gt|#39|nbsp);)?/g,function(e,t){return t?e:{"<":"&lt;","&":"&amp;",'"':"&quot;",">":"&gt;","'":"&#39;"}[e]}):""},n.clearWhiteSpace=function(e){return e.replace(/[\u200b\t\r\n]/g,"")},n.each(["String","Function","Array","Number","RegExp","Object"],function(e){var t=Object.prototype.toString;n["is"+e]=function(n){return t.apply(n)=="[object "+e+"]"}})}},e[34]={value:function(t,n,r){r.exports=window.kityminder=e.r(35)}},e[35]={value:function(t,n,r){var o={version:e.r(19).version};e.r(33),o.Minder=e.r(19),o.Command=e.r(9),o.Node=e.r(21),e.r(22),e.r(8),o.Event=e.r(13),o.data=e.r(12),e.r(10),o.KeyMap=e.r(15),e.r(29),e.r(30),e.r(23),e.r(28),e.r(14),e.r(16),o.Module=e.r(20),e.r(26),o.Render=e.r(27),o.Connect=e.r(11),o.Layout=e.r(18),o.Theme=e.r(32),o.Template=e.r(31),o.Promise=e.r(25),e.r(7),e.r(24),e.r(42),e.r(43),e.r(44),e.r(45),e.r(46),e.r(47),e.r(48),e.r(50),e.r(49),e.r(51),e.r(52),e.r(53),e.r(54),e.r(55),e.r(56),e.r(57),e.r(58),e.r(59),e.r(60),e.r(61),e.r(62),e.r(63),e.r(64),e.r(68),e.r(65),e.r(67),e.r(66),e.r(40),e.r(36),e.r(37),e.r(38),e.r(39),e.r(41),e.r(75),e.r(78),e.r(77),e.r(76),e.r(78),e.r(80),e.r(79),e.r(0),e.r(1),e.r(2),e.r(3),e.r(4),e.r(5),e.r(6),e.r(69),e.r(73),e.r(70),e.r(72),e.r(71),e.r(74),r.exports=o}},e[36]={value:function(t,n,r){var o=e.r(17),i=e.r(18);["left","right","top","bottom"].forEach(function(e){var t="left"==e||"right"==e?"x":"y",n="left"==e||"top"==e?-1:1,r={left:"right",right:"left",top:"bottom",bottom:"top",x:"y",y:"x"};i.register(e,o.createClass({base:i,doLayout:function(i,a){var s=i.getContentBox();if("x"==t?(i.setVertexOut(new o.Point(s[e],s.cy)),i.setLayoutVectorOut(new o.Vector(n,0))):(i.setVertexOut(new o.Point(s.cx,s[e])),i.setLayoutVectorOut(new o.Vector(0,n))),!a.length)return!1;a.forEach(function(i){var a=i.getContentBox();i.setLayoutTransform(new o.Matrix),"x"==t?(i.setVertexIn(new o.Point(a[r[e]],a.cy)),i.setLayoutVectorIn(new o.Vector(n,0))):(i.setVertexIn(new o.Point(a.cx,a[r[e]])),i.setLayoutVectorIn(new o.Vector(0,n)))}),this.align(a,r[e]),this.stack(a,r[t]);var u=this.getBranchBox(a),c=0,h=0;"x"==t?(c=s[e],c+=n*i.getStyle("margin-"+e),c+=n*a[0].getStyle("margin-"+r[e]),h=s.bottom,h-=s.height/2,h-=u.height/2,h-=u.y):(c=s.right,c-=s.width/2,c-=u.width/2,c-=u.x,h=s[e],h+=n*i.getStyle("margin-"+e),h+=n*a[0].getStyle("margin-"+r[e])),this.move(a,c,h)},getOrderHint:function(e){var n=[],r=e.getLayoutBox();"x"==t?(n.push({type:"up",node:e,area:new o.Box({x:r.x,y:r.top-e.getStyle("margin-top")-5,width:r.width,height:e.getStyle("margin-top")}),path:["M",r.x,r.top-5,"L",r.right,r.top-5]}),n.push({type:"down",node:e,area:new o.Box({x:r.x,y:r.bottom+5,width:r.width,height:e.getStyle("margin-bottom")}),path:["M",r.x,r.bottom+5,"L",r.right,r.bottom+5]})):(n.push({type:"up",node:e,area:new o.Box({x:r.left-e.getStyle("margin-left")-5,y:r.top,width:e.getStyle("margin-left"),height:r.height}),path:["M",r.left-5,r.top,"L",r.left-5,r.bottom]}),n.push({type:"down",node:e,area:new o.Box({x:r.right+5,y:r.top,width:e.getStyle("margin-right"),height:r.height}),path:["M",r.right+5,r.top,"L",r.right+5,r.bottom]}));return n}}))})}},e[37]={value:function(t,n,r){var o=e.r(17),i=e.r(18);[-1,1].forEach(function(e){var t="filetree-"+(e>0?"down":"up");i.register(t,o.createClass({base:i,doLayout:function(t,n,r){var i=t.getContentBox();if(t.setVertexOut(new o.Point(i.left+20,e>0?i.bottom:i.top)),t.setLayoutVectorOut(new o.Vector(0,e)),n.length){n.forEach(function(e){var t=e.getContentBox();e.setLayoutTransform(new o.Matrix),e.setVertexIn(new o.Point(t.left,t.cy)),e.setLayoutVectorIn(new o.Vector(1,0))}),this.align(n,"left"),this.stack(n,"y");var a=0;a+=i.left,a+=20,a+=n[0].getStyle("margin-left");var s=0;e>0?(s+=i.bottom,s+=t.getStyle("margin-bottom"),s+=n[0].getStyle("margin-top")):(s-=this.getTreeBox(n).bottom,s+=i.top,s-=t.getStyle("margin-top"),s-=n[0].getStyle("margin-bottom")),this.move(n,a,s)}},getOrderHint:function(e){var t=[],n=e.getLayoutBox(),r=e.getLevel()>1?3:5;return t.push({type:"up",node:e,area:new o.Box({x:n.x,y:n.top-e.getStyle("margin-top")-r,width:n.width,height:e.getStyle("margin-top")}),path:["M",n.x,n.top-r,"L",n.right,n.top-r]}),t.push({type:"down",node:e,area:new o.Box({x:n.x,y:n.bottom+r,width:n.width,height:e.getStyle("margin-bottom")}),path:["M",n.x,n.bottom+r,"L",n.right,n.bottom+r]}),t}}))})}},e[38]={value:function(t,n,r){var o=e.r(17),i=e.r(18);i.register("fish-bone-master",o.createClass("FishBoneMasterLayout",{base:i,doLayout:function(e,t,n){var r=[],i=[],a=t[0],s=e.getContentBox();if(e.setVertexOut(new o.Point(s.right,s.cy)),e.setLayoutVectorOut(new o.Vector(1,0)),a){a.getContentBox();var u=e.getStyle("margin-right"),c=a.getStyle("margin-left"),h=a.getStyle("margin-top"),l=a.getStyle("margin-bottom");t.forEach(function(e,t){e.setLayoutTransform(new o.Matrix);var n=e.getContentBox();t%2?(i.push(e),e.setVertexIn(new o.Point(n.left,n.top)),e.setLayoutVectorIn(new o.Vector(1,1))):(r.push(e),e.setVertexIn(new o.Point(n.left,n.bottom)),e.setLayoutVectorIn(new o.Vector(1,-1)))}),this.stack(r,"x"),this.stack(i,"x"),this.align(r,"bottom"),this.align(i,"top");var d=s.right+u+c,f=s.cy-l-e.getStyle("margin-top"),g=s.cy+h+e.getStyle("margin-bottom");this.move(r,d,f),this.move(i,d+c,g)}}}))}},e[39]={value:function(t,n,r){var o=e.r(17),i=e.r(18);i.register("fish-bone-slave",o.createClass("FishBoneSlaveLayout",{base:i,doLayout:function(e,t,n){var r=this,i=Math.abs,a=e.getContentBox(),s=e.getLayoutVectorIn();e.setLayoutVectorOut(s);var u=a.left+.382*a.width,c=new o.Point(u,s.y>0?a.bottom:a.top);e.setVertexOut(c);var h=t[0];if(h){var l=h.getContentBox();t.forEach(function(e,t){e.setLayoutTransform(new o.Matrix),e.setLayoutVectorIn(new o.Vector(1,0)),e.setVertexIn(new o.Point(l.left,l.cy))}),this.stack(t,"y"),this.align(t,"left");var d=0,f=0;d+=c.x,e.getLayoutVectorOut().y<0?(f-=this.getTreeBox(t).bottom,f+=e.getContentBox().top,f-=e.getStyle("margin-top"),f-=h.getStyle("margin-bottom")):(f+=e.getContentBox().bottom,f+=e.getStyle("margin-bottom"),f+=h.getStyle("margin-top")),this.move(t,d,f),2==n&&t.forEach(function(e){var t=e.getLayoutTransform(),n=e.getContentBox(),a=t.transformPoint(new o.Point(n.left,0));r.move([e],i(a.y-c.y),0)})}}}))}},e[40]={value:function(t,n,r){var o=e.r(17),i=e.r(18),a=e.r(19);i.register("mind",o.createClass({base:i,doLayout:function(e,t){var n=Math.ceil(e.children.length/2),r=[],i=[];t.forEach(function(e){e.getIndex()<n?r.push(e):i.push(e)});var s=a.getLayoutInstance("left"),u=a.getLayoutInstance("right");s.doLayout(e,i),u.doLayout(e,r);var c=e.getContentBox();e.setVertexOut(new o.Point(c.cx,c.cy)),e.setLayoutVectorOut(new o.Vector(0,0))},getOrderHint:function(e){var t=[],n=e.getLayoutBox();return t.push({type:"up",node:e,area:new o.Box({x:n.x,y:n.top-e.getStyle("margin-top")-5,width:n.width,height:e.getStyle("margin-top")}),path:["M",n.x,n.top-5,"L",n.right,n.top-5]}),t.push({type:"down",node:e,area:new o.Box({x:n.x,y:n.bottom+5,width:n.width,height:e.getStyle("margin-bottom")}),path:["M",n.x,n.bottom+5,"L",n.right,n.bottom+5]}),t}}))}},e[41]={value:function(t,n,r){var o=e.r(17),i=e.r(18);e.r(19);i.register("tianpan",o.createClass({base:i,doLayout:function(e,t){if(0!=t.length){var n,r,i,a=this,s=e.getContentBox(),u=5,c=Math.max(s.width,50);t.forEach(function(e,t){e.setLayoutTransform(new o.Matrix),i=a.getTreeBox(e),c=Math.max(Math.max(i.width,i.height),c)}),c=c/1.5/Math.PI,t.forEach(function(e,t){n=c*(Math.cos(u)+Math.sin(u)*u),r=c*(Math.sin(u)-Math.cos(u)*u),u+=.9-.02*t,e.setLayoutVectorIn(new o.Vector(1,0)),e.setVertexIn(new o.Point(s.cx,s.cy)),e.setLayoutTransform(new o.Matrix),a.move([e],n,r)})}},getOrderHint:function(e){var t=[],n=e.getLayoutBox();return t.push({type:"up",node:e,area:{x:n.x,y:n.top-e.getStyle("margin-top")-5,width:n.width,height:e.getStyle("margin-top")},path:["M",n.x,n.top-5,"L",n.right,n.top-5]}),t.push({type:"down",node:e,area:{x:n.x,y:n.bottom+5,width:n.width,height:e.getStyle("margin-bottom")},path:["M",n.x,n.bottom+5,"L",n.right,n.bottom+5]}),t}}))}},e[42]={value:function(t,n,r){var o=e.r(17),i=e.r(21),a=e.r(9),s=e.r(20);function u(e,t){return e.getIndex()-t.getIndex()}function c(e,t){return-u(e,t)}o.extendClass(i,{arrange:function(e){var t=this.parent;if(t){var n=t.children;if(!(e<0||e>=n.length))return n.splice(this.getIndex(),1),n.splice(e,0,this),this}}});var h=o.createClass("ArrangeUpCommand",{base:a,execute:function(e){var t=e.getSelectedNodes();t.sort(u);var n=t.map(function(e){return e.getIndex()});t.forEach(function(e,t){e.arrange(n[t]-1)}),e.layout(300)},queryState:function(e){return e.getSelectedNode()?0:-1}}),l=o.createClass("ArrangeUpCommand",{base:a,execute:function(e){var t=e.getSelectedNodes();t.sort(c);var n=t.map(function(e){return e.getIndex()});t.forEach(function(e,t){e.arrange(n[t]+1)}),e.layout(300)},queryState:function(e){return e.getSelectedNode()?0:-1}}),d=o.createClass("ArrangeCommand",{base:a,execute:function(e,t){var n=e.getSelectedNodes().slice();if(n.length&&i.getCommonAncestor(n)==n[0].parent){var r=n.map(function(e){return{index:e.getIndex(),node:e}}),o=Math.min.apply(Math,r.map(function(e){return e.index}))>=t;r.sort(function(e,t){return o?t.index-e.index:e.index-t.index}),r.forEach(function(e){e.node.arrange(t)}),e.layout(300)}},queryState:function(e){return e.getSelectedNode()?0:-1}});s.register("ArrangeModule",{commands:{arrangeup:h,arrangedown:l,arrange:d},contextmenu:[{command:"arrangeup"},{command:"arrangedown"},{divider:!0}],commandShortcutKeys:{arrangeup:"normal::alt+Up",arrangedown:"normal::alt+Down"}})}},e[43]={value:function(t,n,r){var o=e.r(17),i=(e.r(33),e.r(19),e.r(21),e.r(9)),a=e.r(20),s=e.r(61);a.register("basestylemodule",function(){var e=this;function t(e,t){return e.getData(t)||e.getStyle(t)}return s.registerStyleHook(function(e,n){var r=t(e,"font-weight"),o=t(e,"font-style");[r,o].join("/");n.eachItem(function(e,t){t.setFont({weight:r,style:o})})}),{commands:{bold:o.createClass("boldCommand",{base:i,execute:function(e){var t=e.getSelectedNodes();1==this.queryState("bold")?t.forEach(function(e){e.setData("font-weight").render()}):t.forEach(function(e){e.setData("font-weight","bold").render()}),e.layout()},queryState:function(){var t=e.getSelectedNodes(),n=0;return 0===t.length?-1:(t.forEach(function(e){if(e&&e.getData("font-weight"))return n=1,!1}),n)}}),italic:o.createClass("italicCommand",{base:i,execute:function(e){var t=e.getSelectedNodes();1==this.queryState("italic")?t.forEach(function(e){e.setData("font-style").render()}):t.forEach(function(e){e.setData("font-style","italic").render()}),e.layout()},queryState:function(){var t=e.getSelectedNodes(),n=0;return 0===t.length?-1:(t.forEach(function(e){if(e&&e.getData("font-style"))return n=1,!1}),n)}})},commandShortcutKeys:{bold:"ctrl+b",italic:"ctrl+i"}}})}},e[44]={value:function(t,n,r){var o=e.r(17),i=(e.r(33),e.r(21)),a=e.r(9);e.r(20).register("ClipboardModule",function(){var e=this,t=[],n=[];function r(t,o){n.push(o),e.appendNode(o,t),o.render(),o.setLayoutOffset(null);var i=o.children.map(function(e){return e.clone()});o.clearChildren();for(var a,s=0;a=i[s];s++)r(o,a)}function s(e){e.length&&(e.sort(function(e,t){return e.getIndex()-t.getIndex()}),t=e.map(function(e){return e.clone()}))}var u=o.createClass("CopyCommand",{base:a,execute:function(e){s(e.getSelectedAncestors(!0)),this.setContentChanged(!1)}}),c=o.createClass("CutCommand",{base:a,execute:function(e){var t=e.getSelectedAncestors();0!==t.length&&(s(t),e.select(i.getCommonAncestor(t),!0),t.slice().forEach(function(t){e.removeNode(t)}),e.layout(300))}}),h=o.createClass("PasteCommand",{base:a,execute:function(e){if(t.length){var o=e.getSelectedNodes();if(!o.length)return;for(var i,a=0;i=t[a];a++)for(var s,u=0;s=o[u];u++)r(s,i.clone());e.select(n,!0),n=[],e.layout(300)}},queryState:function(e){return e.getSelectedNode()?0:-1}});if(e.supportClipboardEvent&&!o.Browser.gecko){return{commands:{copy:u,cut:c,paste:h},clipBoardEvents:{copy:function(e){this.fire("beforeCopy",e)}.bind(e),cut:function(e){this.fire("beforeCut",e)}.bind(e),paste:function(e){this.fire("beforePaste",e)}.bind(e)},sendToClipboard:s}}return{commands:{copy:u,cut:c,paste:h},commandShortcutKeys:{copy:"normal::ctrl+c|",cut:"normal::ctrl+x",paste:"normal::ctrl+v"},sendToClipboard:s}})}},e[45]={value:function(t,n,r){var o=e.r(17),i=(e.r(33),e.r(21)),a=e.r(9),s=e.r(20),u=o.createClass("MoveToParentCommand",{base:a,execute:function(e,t,n){for(var r,o=0;o<t.length;o++)(r=t[o]).parent&&(r.parent.removeChild(r),n.appendChild(r),r.render());n.expand(),e.select(t,!0)}}),c=o.createClass("DropHinter",{base:o.Group,constructor:function(){this.callBase(),this.rect=new o.Rect,this.addShape(this.rect)},render:function(e){this.setVisible(!!e),e&&(this.rect.setBox(e.getLayoutBox()).setRadius(e.getStyle("radius")||0).stroke(e.getStyle("drop-hint-color")||"yellow",e.getStyle("drop-hint-width")||2),this.bringTop())}}),h=o.createClass("OrderHinter",{base:o.Group,constructor:function(){this.callBase(),this.area=new o.Rect,this.path=new o.Path,this.addShapes([this.area,this.path])},render:function(e){this.setVisible(!!e),e&&(this.area.setBox(e.area),this.area.fill(e.node.getStyle("order-hint-area-color")||"rgba(0, 255, 0, .5)"),this.path.setPathData(e.path),this.path.stroke(e.node.getStyle("order-hint-path-color")||"#0f0",e.node.getStyle("order-hint-path-width")||1))}}),l=o.createClass("TreeDragger",{constructor:function(e){this._minder=e,this._dropHinter=new c,this._orderHinter=new h,e.getRenderContainer().addShapes([this._dropHinter,this._orderHinter])},dragStart:function(e){this._startPosition=e},dragMove:function(e){if(this._startPosition){var t=o.Vector.fromPoints(this._dragPosition||this._startPosition,e),n=this._minder;if(this._dragPosition=e,!this._dragMode){if(o.Vector.fromPoints(this._dragPosition,this._startPosition).length()<10)return;if(!this._enterDragMode())return}for(var r=0;r<this._dragSources.length;r++)this._dragSources[r].setLayoutOffset(this._dragSources[r].getLayoutOffset().offset(t)),n.applyLayoutResult(this._dragSources[r]);this._dropTest()?this._renderOrderHint(this._orderSucceedHint=null):this._orderTest()}},dragEnd:function(){if(this._startPosition=null,this._dragPosition=null,this._dragMode){if(this._fadeDragSources(1),this._dropSucceedTarget)this._dragSources.forEach(function(e){e.setLayoutOffset(null)}),this._minder.layout(-1),this._minder.execCommand("movetoparent",this._dragSources,this._dropSucceedTarget);else if(this._orderSucceedHint){var e=this._orderSucceedHint,t=e.node.getIndex(),n=this._dragSources.map(function(e){return e.setLayoutOffset(null),e.getIndex()}),r=Math.max.apply(Math,n);t<Math.min.apply(Math,n)&&"down"==e.type&&t++,t>r&&"up"==e.type&&t--,e.node.setLayoutOffset(null),this._minder.execCommand("arrange",t),this._renderOrderHint(null)}else this._minder.fire("savescene");this._minder.layout(300),this._leaveDragMode(),this._minder.fire("contentchange")}},_enterDragMode:function(){return this._calcDragSources(),this._dragSources.length?(this._fadeDragSources(.5),this._calcDropTargets(),this._calcOrderHints(),this._dragMode=!0,this._minder.setStatus("dragtree"),!0):(this._startPosition=null,!1)},_calcDragSources:function(){this._dragSources=this._minder.getSelectedAncestors()},_fadeDragSources:function(e){var t=this._minder;this._dragSources.forEach(function(n){n.getRenderContainer().setOpacity(e,200),n.traverse(function(n){e<1?t.detachNode(n):t.attachNode(n)},!0)})},_calcDropTargets:function(){this._dropTargets=function e(t,n){var r,o=[];return o.push(n),n.getChildren().forEach(function(n){for(r=0;r<t.length;r++)if(t[r]==n)return;o=o.concat(e(t,n))}),o}(this._dragSources,this._minder.getRoot()),this._dropTargetBoxes=this._dropTargets.map(function(e){return e.getLayoutBox()})},_calcOrderHints:function(){var e=this._dragSources,t=i.getCommonAncestor(e);if(t==e[0]&&(t=e[0].parent),0!==e.length&&t==e[0].parent){var n=t.children;this._orderHints=n.reduce(function(t,n){return-1==e.indexOf(n)&&(t=t.concat(n.getOrderHint())),t},[])}else this._orderHints=[]},_leaveDragMode:function(){this._dragMode=!1,this._dropSucceedTarget=null,this._orderSucceedHint=null,this._renderDropHint(null),this._renderOrderHint(null),this._minder.rollbackStatus()},_drawForDragMode:function(){this._text.setContent(this._dragSources.length+" items"),this._text.setPosition(this._startPosition.x,this._startPosition.y+5),this._minder.getRenderContainer().addShape(this)},_boxTest:function(e,t,n){var r,o,i,a,s,u=this._dragSources.map(function(e){return e.getLayoutBox()});for(n=n||function(e,t,n){return e&&!e.isEmpty()},r=0;r<e.length;r++)for(i=e[r],s=t.call(this,i,r),o=0;o<u.length;o++){if(n((a=u[o]).intersect(s),a,s))return i}return null},_dropTest:function(){return this._dropSucceedTarget=this._boxTest(this._dropTargets,function(e,t){return this._dropTargetBoxes[t]},function(e,t,n){function r(e){return e.width*e.height}return!!e&&(!!r(e)&&(r(e)>.5*Math.min(r(t),r(n))||(e.width+1>=Math.min(t.width,n.width)||e.height+1>=Math.min(t.height,n.height))))}),this._renderDropHint(this._dropSucceedTarget),!!this._dropSucceedTarget},_orderTest:function(){return this._orderSucceedHint=this._boxTest(this._orderHints,function(e){return e.area}),this._renderOrderHint(this._orderSucceedHint),!!this._orderSucceedHint},_renderDropHint:function(e){this._dropHinter.render(e)},_renderOrderHint:function(e){this._orderHinter.render(e)},preventDragMove:function(){this._startPosition=null}});s.register("DragTree",function(){var e;return{init:function(){e=new l(this),window.addEventListener("mouseup",function(){e.dragEnd()})},events:{"normal.mousedown inputready.mousedown":function(t){t.originEvent.button||t.getTargetNode()&&t.getTargetNode()!=this.getRoot()&&e.dragStart(t.getPosition())},"normal.mousemove dragtree.mousemove":function(t){e.dragMove(t.getPosition())},"normal.mouseup dragtree.beforemouseup":function(t){e.dragEnd(),t.preventDefault()},statuschange:function(t){"textedit"==t.lastStatus&&"normal"==t.currentStatus&&e.preventDragMove()}},commands:{movetoparent:u}}})}},e[46]={value:function(t,n,r){var o=e.r(17),i=e.r(33),a=e.r(15),s=e.r(21),u=e.r(9),c=e.r(20),h=e.r(27);c.register("Expand",function(){var e=this;o.extendClass(s,{expand:function(){return this.setData("expandState","expand"),this},collapse:function(){return this.setData("expandState","collapse"),this},isExpanded:function(){return"collapse"!==this.getData("expandState")&&(this.isRoot()||this.parent.isExpanded())},isCollapsed:function(){return!this.isExpanded()}});var t=o.createClass("ExpandCommand",{base:u,execute:function(e,t){var n=e.getSelectedNode();if(n){for(t&&(n=n.parent);n.parent;)n.expand(),n=n.parent;n.renderTree(),e.layout(100)}},queryState:function(e){var t=e.getSelectedNode();return!t||t.isRoot()||t.isExpanded()?-1:0}}),n=o.createClass("ExpandToLevelCommand",{base:u,execute:function(e,t){e.getRoot().traverse(function(e){e.getLevel()<t&&e.expand(),e.getLevel()!=t||e.isLeaf()||e.collapse()}),e.refresh(100)},enableReadOnly:!0}),r=o.createClass("CollapseCommand",{base:u,execute:function(e){var t=e.getSelectedNode();t&&(t.collapse(),t.renderTree(),e.layout())},queryState:function(e){var t=e.getSelectedNode();return t&&!t.isRoot()&&t.isExpanded()?0:-1}}),c=o.createClass("Expander",{base:o.Group,constructor:function(e){this.callBase(),this.radius=6,this.outline=new o.Circle(this.radius).stroke("gray").fill("white"),this.sign=(new o.Path).stroke("gray"),this.addShapes([this.outline,this.sign]),this.initEvent(e),this.setId(i.uuid("node_expander")),this.setStyle("cursor","pointer")},initEvent:function(t){this.on("mousedown",function(n){e.select([t],!0),t.isExpanded()?t.collapse():t.expand(),t.renderTree().getMinder().layout(100),t.getMinder().fire("contentchange"),n.stopPropagation(),n.preventDefault()}),this.on("dblclick click mouseup",function(e){e.stopPropagation(),e.preventDefault()})},setState:function(e){if("hide"!=e){this.setVisible(!0);var t=["M",1.5-this.radius,0,"L",this.radius-1.5,0];"collapse"==e&&t.push(["M",0,1.5-this.radius,"L",0,this.radius-1.5]),this.sign.setPathData(t)}else this.setVisible(!1)}});return{commands:{expand:t,expandtolevel:n,collapse:r},events:{layoutapply:function(e){var t=e.node.getRenderer("ExpanderRenderer");t.getRenderShape()&&t.update(t.getRenderShape(),e.node)},beforerender:function(e){var t=e.node,n=!t.parent||t.parent.isExpanded();t.getRenderContainer().setVisible(n),n||e.stopPropagation()},"normal.keydown":function(e){if("textedit"!=this.getStatus()){if(e.originEvent.keyCode==a["/"]){var t=this.getSelectedNode();if(!t||t==this.getRoot())return;var n=t.isExpanded();this.getSelectedNodes().forEach(function(e){n?e.collapse():e.expand(),e.renderTree()}),this.layout(100),this.fire("contentchange"),e.preventDefault(),e.stopPropagationImmediately()}e.isShortcutKey("Alt+`")&&this.execCommand("expandtolevel",9999);for(var r=1;r<6;r++)e.isShortcutKey("Alt+"+r)&&this.execCommand("expandtolevel",r)}}},renderers:{outside:o.createClass("ExpanderRenderer",{base:h,create:function(e){if(!e.isRoot())return this.expander=new c(e),e.getRenderContainer().prependShape(this.expander),e.expanderRenderer=this,this.node=e,this.expander},shouldRender:function(e){return!e.isRoot()},update:function(e,t,n){if(t.parent){var r=t.parent.isExpanded();e.setState(r&&t.children.length?t.getData("expandState"):"hide");var o=t.getLayoutVectorIn().normalize(e.radius+t.getStyle("stroke-width")),i=t.getVertexIn().offset(o.reverse());this.expander.setTranslate(i)}}})},contextmenu:[{command:"expandtoleaf",query:function(){return!e.getSelectedNode()},fn:function(e){e.execCommand("expandtolevel",9999)}},{command:"expandtolevel1",query:function(){return!e.getSelectedNode()},fn:function(e){e.execCommand("expandtolevel",1)}},{command:"expandtolevel2",query:function(){return!e.getSelectedNode()},fn:function(e){e.execCommand("expandtolevel",2)}},{command:"expandtolevel3",query:function(){return!e.getSelectedNode()},fn:function(e){e.execCommand("expandtolevel",3)}},{divider:!0}]}})}},e[47]={value:function(t,n,r){var o=e.r(17),i=(e.r(33),e.r(19),e.r(21),e.r(9)),a=e.r(20);function s(e,t){return e.getData(t)||e.getStyle(t)}e.r(61).registerStyleHook(function(e,t){var n=e.getData("color"),r=e.getStyle("selected-color"),o=e.getStyle("color"),i=n||(e.isSelected()&&r?r:o),a=s(e,"font-family"),u=s(e,"font-size");t.fill(i),t.eachItem(function(e,t){t.setFont({family:a,size:u})})}),a.register("fontmodule",{commands:{forecolor:o.createClass("fontcolorCommand",{base:i,execute:function(e,t){e.getSelectedNodes().forEach(function(e){e.setData("color",t),e.render()})},queryState:function(e){return 0===e.getSelectedNodes().length?-1:0},queryValue:function(e){return 1==e.getSelectedNodes().length?e.getSelectedNodes()[0].getData("color"):"mixed"}}),background:o.createClass("backgroudCommand",{base:i,execute:function(e,t){e.getSelectedNodes().forEach(function(e){e.setData("background",t),e.render()})},queryState:function(e){return 0===e.getSelectedNodes().length?-1:0},queryValue:function(e){return 1==e.getSelectedNodes().length?e.getSelectedNodes()[0].getData("background"):"mixed"}}),fontfamily:o.createClass("fontfamilyCommand",{base:i,execute:function(e,t){e.getSelectedNodes().forEach(function(n){n.setData("font-family",t),n.render(),e.layout()})},queryState:function(e){return 0===e.getSelectedNodes().length?-1:0},queryValue:function(e){var t=e.getSelectedNode();return t?t.getData("font-family"):null}}),fontsize:o.createClass("fontsizeCommand",{base:i,execute:function(e,t){e.getSelectedNodes().forEach(function(n){n.setData("font-size",t),n.render(),e.layout(300)})},queryState:function(e){return 0===e.getSelectedNodes().length?-1:0},queryValue:function(e){var t=e.getSelectedNode();return t?t.getData("font-size"):null}})}})}},e[48]={value:function(t,n,r){var o=e.r(17),i=(e.r(33),e.r(19),e.r(21),e.r(9)),a=e.r(20),s=e.r(27);a.register("hyperlink",{commands:{hyperlink:o.createClass("hyperlink",{base:i,execute:function(e,t,n){e.getSelectedNodes().forEach(function(e){e.setData("hyperlink",t),e.setData("hyperlinkTitle",t&&n),e.render()}),e.layout()},queryState:function(e){var t=e.getSelectedNodes(),n=0;return 0===t.length?-1:(t.forEach(function(e){if(e&&e.getData("hyperlink"))return n=0,!1}),n)},queryValue:function(e){var t=e.getSelectedNode();return{url:t.getData("hyperlink"),title:t.getData("hyperlinkTitle")}}})},renderers:{right:o.createClass("hyperlinkrender",{base:s,create:function(){var e=new o.HyperLink,t=new o.Path,n=new o.Rect(24,22,-2,-6,4).fill("rgba(255, 255, 255, 0)");return t.setPathData("M16.614,10.224h-1.278c-1.668,0-3.07-1.07-3.599-2.556h4.877c0.707,0,1.278-0.571,1.278-1.278V3.834 c0-0.707-0.571-1.278-1.278-1.278h-4.877C12.266,1.071,13.668,0,15.336,0h1.278c2.116,0,3.834,1.716,3.834,3.834V6.39 C20.448,8.508,18.73,10.224,16.614,10.224z M5.112,5.112c0-0.707,0.573-1.278,1.278-1.278h7.668c0.707,0,1.278,0.571,1.278,1.278 S14.765,6.39,14.058,6.39H6.39C5.685,6.39,5.112,5.819,5.112,5.112z M2.556,3.834V6.39c0,0.707,0.573,1.278,1.278,1.278h4.877 c-0.528,1.486-1.932,2.556-3.599,2.556H3.834C1.716,10.224,0,8.508,0,6.39V3.834C0,1.716,1.716,0,3.834,0h1.278 c1.667,0,3.071,1.071,3.599,2.556H3.834C3.129,2.556,2.556,3.127,2.556,3.834z").fill("#666"),e.addShape(n),e.addShape(t),e.setTarget("_blank"),e.setStyle("cursor","pointer"),e.on("mouseover",function(){n.fill("rgba(255, 255, 200, .8)")}).on("mouseout",function(){n.fill("rgba(255, 255, 255, 0)")}),e},shouldRender:function(e){return e.getData("hyperlink")},update:function(e,t,n){var r=t.getData("hyperlink");e.setHref("#");for(var i=["^http:","^https:","^ftp:","^mailto:"],a=0;a<i.length;a++){if(new RegExp(i[a]).test(r)){e.setHref(r);break}}var s=t.getData("hyperlinkTitle");s=s?[s,"(",r,")"].join(""):r,e.node.setAttributeNS("http://www.w3.org/1999/xlink","title",s);var u=t.getStyle("space-right");return e.setTranslate(n.right+u+2,-5),new o.Box({x:n.right+u,y:-11,width:24,height:22})}})}})}},e[49]={value:function(t,n,r){var o=e.r(17),i=e.r(15),a=e.r(20);e.r(9);a.register("ImageViewer",function(){function e(e,t,r){var o=document.createElement(e);return n(o,t),r&&r.length&&r.forEach(function(e){o.appendChild(e)}),o}function t(e,t,n){e.addEventListener(t,n)}function n(e,t){t&&t.split(" ").forEach(function(t){e.classList.add(t)})}var r=o.createClass("ImageViewer",{constructor:function(){var n=e("button","km-image-viewer-btn km-image-viewer-close"),r=e("button","km-image-viewer-btn km-image-viewer-source"),o=this.image=e("img"),i=this.toolbar=e("div","km-image-viewer-toolbar",[r,n]),a=e("div","km-image-viewer-container",[o]),s=this.viewer=e("div","km-image-viewer",[i,a]);this.hotkeyHandler=this.hotkeyHandler.bind(this),t(n,"click",this.close.bind(this)),t(r,"click",this.viewSource.bind(this)),t(o,"click",this.zoomImage.bind(this)),t(s,"contextmenu",this.toggleToolbar.bind(this)),t(document,"keydown",this.hotkeyHandler)},dispose:function(){this.close(),document.removeEventListener("remove",this.hotkeyHandler)},hotkeyHandler:function(e){this.actived&&e.keyCode===i.esc&&this.close()},toggleToolbar:function(e){e&&e.preventDefault(),this.toolbar.classList.toggle("hidden")},zoomImage:function(e){var t=this.image;"boolean"==typeof e?e&&n(t,"limited"):t.classList.toggle("limited")},viewSource:function(e){window.open(this.image.src)},open:function(e){var t=document.querySelector("input");t&&(t.focus(),t.blur()),this.image.src=e,this.zoomImage(!0),document.body.appendChild(this.viewer),this.actived=!0},close:function(){this.image.src="",document.body.removeChild(this.viewer),this.actived=!1}});return{init:function(){this.viewer=new r},events:{"normal.dblclick":function(e){var t=e.kityEvent.targetShape;"Image"===t.__KityClassName&&t.url&&this.viewer.open(t.url)}}}})}},e[50]={value:function(t,n,r){var o=e.r(17),i=(e.r(33),e.r(19),e.r(21),e.r(9)),a=e.r(20),s=e.r(27);a.register("image",function(){return{defaultOptions:{maxImageWidth:200,maxImageHeight:200},commands:{image:o.createClass("ImageCommand",{base:i,execute:function(e,t,n){var r=e.getSelectedNodes();!function(e,t){var n=document.createElement("img");n.onload=function(){t(n.width,n.height)},n.onerror=function(){t(null)},n.src=e}(t,function(o,i){r.forEach(function(r){var a=function(e,t,n,r){var o=e/t;return e>n&&o>n/r?t=(e=n)/o:t>r&&(e=(t=r)*o),{width:0|e,height:0|t}}(o,i,e.getOption("maxImageWidth"),e.getOption("maxImageHeight"));r.setData("image",t),r.setData("imageTitle",t&&n),r.setData("imageSize",t&&a),r.render()}),e.fire("saveScene"),e.layout(300)})},queryState:function(e){var t=e.getSelectedNodes(),n=0;return 0===t.length?-1:(t.forEach(function(e){if(e&&e.getData("image"))return n=0,!1}),n)},queryValue:function(e){var t=e.getSelectedNode();return{url:t.getData("image"),title:t.getData("imageTitle")}}})},renderers:{top:o.createClass("ImageRenderer",{base:s,create:function(e){return new o.Image(e.getData("image"))},shouldRender:function(e){return e.getData("image")},update:function(e,t,n){var r=t.getData("image"),i=t.getData("imageTitle"),a=t.getData("imageSize"),s=t.getStyle("space-top");if(a){i&&e.node.setAttributeNS("http://www.w3.org/1999/xlink","title",i);var u=n.cx-a.width/2,c=n.y-a.height-s;return e.setUrl(r).setX(0|u).setY(0|c).setWidth(0|a.width).setHeight(0|a.height),new o.Box(0|u,0|c,0|a.width,0|a.height)}}})}}})}},e[51]={value:function(t,n,r){e.r(17),e.r(33),e.r(15),e.r(19),e.r(21),e.r(9);var o=e.r(20);e.r(27);o.register("KeyboardModule",function(){var e=Math.min,t=Math.max,n=(Math.abs,Math.sqrt);Math.exp;function r(e){var t,n=[];e.traverse(function(e){(t=e.getLayoutBox()).width&&t.height&&n.push({left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height,width:t.width,height:t.height,node:e})});for(var r=0;r<n.length;r++)i(n,r)}function o(r,o){var i,a,s,u,c,h,l;i=e(r.left,o.left),a=t(r.right,o.right),s=e(r.top,o.top),u=t(r.bottom,o.bottom),c=a-i-r.width-o.width,h=u-s-r.height-o.height,l=c<0?h:h<0?c:n(c*c+h*h);var d=r.node,f=o.node;return d.parent==f.parent&&(l/=10),f.parent==d&&(l/=5),l}function i(e,t){for(var n,r,i=e[t],a={},s=0;s<e.length;s++)s!=t&&(r=o(n=e[s],i),n.right<i.left&&(!a.left||r<a.left.dist)&&(a.left={dist:r,node:n.node}),n.left>i.right&&(!a.right||r<a.right.dist)&&(a.right={dist:r,node:n.node}),n.bottom<i.top&&(!a.top||r<a.top.dist)&&(a.top={dist:r,node:n.node}),n.top>i.bottom&&(!a.down||r<a.down.dist)&&(a.down={dist:r,node:n.node}));i.node._nearestNodes={right:a.right&&a.right.node||null,top:a.top&&a.top.node||null,left:a.left&&a.left.node||null,down:a.down&&a.down.node||null}}return{events:{layoutallfinish:function(){r(this.getRoot())},"normal.keydown readonly.keydown":function(e){var t=this;["left","right","up","down"].forEach(function(n){e.isShortcutKey(n)&&(!function(e,t){var n=e.getSelectedNode();if(!n)return e.select(e.getRoot()),void r(e.getRoot());n._nearestNodes||r(e.getRoot());var o=n._nearestNodes[t];o&&e.select(o,!0)}(t,"up"==n?"top":n),e.preventDefault())})}}}})}},e[52]={value:function(t,n,r){var o=e.r(17),i=e.r(9),a=e.r(20),s=o.createClass("LayoutCommand",{base:i,execute:function(e,t){e.getSelectedNodes().forEach(function(e){e.layout(t)})},queryValue:function(e){var t=e.getSelectedNode();if(t)return t.getData("layout")},queryState:function(e){return e.getSelectedNode()?0:-1}}),u=o.createClass("ResetLayoutCommand",{base:i,execute:function(e){var t=e.getSelectedNodes();t.length||(t=[e.getRoot()]),t.forEach(function(e){e.traverse(function(e){e.resetLayoutOffset(),e.isRoot()||e.setData("layout",null)})}),e.layout(300)},enableReadOnly:!0});a.register("LayoutModule",{commands:{layout:s,resetlayout:u},contextmenu:[{command:"resetlayout"},{divider:!0}],commandShortcutKeys:{resetlayout:"Ctrl+Shift+L"}})}},e[53]={value:function(t,n,r){var o=e.r(17),i=(e.r(33),e.r(19),e.r(21)),a=e.r(9),s=e.r(20),u=(e.r(27),o.createClass("AppendChildCommand",{base:a,execute:function(e,t){var n=e.getSelectedNode();if(!n)return null;var r=e.createNode(t,n);e.select(r,!0),n.isExpanded()?r.render():(n.expand(),n.renderTree()),e.layout(600)},queryState:function(e){return e.getSelectedNode()?0:-1}})),c=o.createClass("AppendSiblingCommand",{base:a,execute:function(e,t){var n=e.getSelectedNode(),r=n.parent;if(!r)return e.execCommand("AppendChildNode",t);var o=e.createNode(t,r,n.getIndex()+1);o.setGlobalLayoutTransform(n.getGlobalLayoutTransform()),e.select(o,!0),o.render(),e.layout(600)},queryState:function(e){return e.getSelectedNode()?0:-1}}),h=o.createClass("RemoverNodeCommand",{base:a,execute:function(e){var t=e.getSelectedNodes(),n=i.getCommonAncestor.apply(null,t),r=t[0].getIndex();if(t.forEach(function(t){t.isRoot()||e.removeNode(t)}),1==t.length){var o=n.children[r-1]||n.children[r];e.select(o||n||e.getRoot(),!0)}else e.select(n||e.getRoot(),!0);e.layout(600)},queryState:function(e){var t=e.getSelectedNode();return t&&!t.isRoot()?0:-1}}),l=o.createClass("AppendParentCommand",{base:a,execute:function(e,t){var n=e.getSelectedNodes();n.sort(function(e,t){return e.getIndex()-t.getIndex()});var r=n[0].parent,o=e.createNode(t,r,n[0].getIndex());n.forEach(function(e){o.appendChild(e)}),o.setGlobalLayoutTransform(n[n.length>>1].getGlobalLayoutTransform()),e.select(o,!0),e.layout(600)},queryState:function(e){var t=e.getSelectedNodes();if(!t.length)return-1;var n=t[0].parent;if(!n)return-1;for(var r=1;r<t.length;r++)if(t[r].parent!=n)return-1;return 0}});s.register("NodeModule",function(){return{commands:{AppendChildNode:u,AppendSiblingNode:c,RemoveNode:h,AppendParentNode:l},commandShortcutKeys:{appendsiblingnode:"normal::Enter",appendchildnode:"normal::Insert|Tab",appendparentnode:"normal::Shift+Tab|normal::Shift+Insert",removenode:"normal::Del|Backspace"}}})}},e[54]={value:function(t,n,r){var o=e.r(17),i=(e.r(33),e.r(19),e.r(21),e.r(9)),a=e.r(20),s=e.r(27);a.register("NoteModule",function(){var e=o.createClass("NoteCommand",{base:i,execute:function(e,t){var n=e.getSelectedNode();n.setData("note",t),n.render(),n.getMinder().layout(300)},queryState:function(e){return 1===e.getSelectedNodes().length?0:-1},queryValue:function(e){var t=e.getSelectedNode();return t&&t.getData("note")}}),t=o.createClass("NoteIcon",{base:o.Group,constructor:function(){this.callBase(),this.width=16,this.height=17,this.rect=new o.Rect(16,17,.5,-8.5,2).fill("transparent"),this.path=(new o.Path).setPathData("M9,9H3V8h6L9,9L9,9z M9,7H3V6h6V7z M9,5H3V4h6V5z M8.5,11H2V2h8v7.5 M9,12l2-2V1H1v11").setTranslate(2.5,-6.5),this.addShapes([this.rect,this.path]),this.on("mouseover",function(){this.rect.fill("rgba(255, 255, 200, .8)")}).on("mouseout",function(){this.rect.fill("transparent")}),this.setStyle("cursor","pointer")}});return{renderers:{right:o.createClass("NoteIconRenderer",{base:s,create:function(e){var n=new t;return n.on("mousedown",function(t){t.preventDefault(),e.getMinder().fire("editnoterequest")}),n.on("mouseover",function(){e.getMinder().fire("shownoterequest",{node:e,icon:n})}),n.on("mouseout",function(){e.getMinder().fire("hidenoterequest",{node:e,icon:n})}),n},shouldRender:function(e){return e.getData("note")},update:function(e,t,n){var r=n.right+t.getStyle("space-left"),i=n.cy;return e.path.fill(t.getStyle("color")),e.setTranslate(r,i),new o.Box(r,Math.round(i-e.height/2),e.width,e.height)}})},commands:{note:e}}})}},e[55]={value:function(t,n,r){var o=e.r(17),i=e.r(33),a=(e.r(19),e.r(21),e.r(9),e.r(20)),s=e.r(27),u=o.createClass("OutlineRenderer",{base:s,create:function(e){var t=(new o.Rect).setId(i.uuid("node_outline"));return this.bringToBack=!0,t},update:function(e,t,n){var r=t.getStyle("shape"),i=t.getStyle("padding-left"),a=t.getStyle("padding-right"),s=t.getStyle("padding-top"),u=t.getStyle("padding-bottom"),c={x:n.x-i,y:n.y-s,width:n.width+i+a,height:n.height+s+u},h=t.getStyle("radius");if(r&&"circle"==r){var l=Math.pow;h=(0,Math.round)(Math.sqrt(l(c.width,2)+l(c.height,2))/2),c.x=n.cx-h,c.y=n.cy-h,c.width=2*h,c.height=2*h}var d=t.isSelected()?t.getMinder().isFocused()?"selected-":"blur-selected-":"";return e.setPosition(c.x,c.y).setSize(c.width,c.height).setRadius(h).fill(t.getData("background")||t.getStyle(d+"background")||t.getStyle("background")).stroke(t.getStyle(d+"stroke"||t.getStyle("stroke")),t.getStyle(d+"stroke-width")),new o.Box(c)}}),c=o.createClass("ShadowRenderer",{base:s,create:function(e){return this.bringToBack=!0,new o.Rect},shouldRender:function(e){return e.getStyle("shadow")},update:function(e,t,n){e.setPosition(n.x+4,n.y+5).fill(t.getStyle("shadow"));var r=t.getStyle("shape");if(r){if("circle"==r){var o=Math.max(n.width,n.height);e.setSize(o,o),e.setRadius(o/2)}}else e.setSize(n.width,n.height),e.setRadius(t.getStyle("radius"))}}),h=new o.Marker;h.setWidth(10),h.setHeight(12),h.setRef(0,0),h.setViewBox(-6,-4,8,10),h.addShape((new o.Path).setPathData("M-5-3l5,3,-5,3").stroke("#33ffff"));var l=/wire/.test(window.location.href),d=o.createClass("WireframeRenderer",{base:s,create:function(){var e=new o.Group,t=this.oxy=(new o.Path).stroke("#f6f").setPathData("M0,-50L0,50M-50,0L50,0"),n=this.wireframe=(new o.Rect).stroke("lightgreen"),r=this.vectorIn=(new o.Path).stroke("#66ffff"),i=this.vectorOut=(new o.Path).stroke("#66ffff");return r.setMarker(h,"end"),i.setMarker(h,"end"),e.addShapes([t,n,r,i])},shouldRender:function(){return l},update:function(e,t,n){this.wireframe.setPosition(n.x,n.y).setSize(n.width,n.height);var r=t.getVertexIn(),o=t.getVertexOut(),i=t.getLayoutVectorIn().normalize(30),a=t.getLayoutVectorOut().normalize(30);this.vectorIn.setPathData(["M",r.offset(i.reverse()),"L",r]),this.vectorOut.setPathData(["M",o,"l",a])}});a.register("OutlineModule",function(){return{events:l?{ready:function(){this.getPaper().addResource(h)},layoutallfinish:function(){this.getRoot().traverse(function(e){e.getRenderer("WireframeRenderer").update(null,e,e.getContentBox())})}}:null,renderers:{outline:u,outside:[c,d]}}})}},e[56]={value:function(t,n,r){var o=e.r(17),i=e.r(33),a=(e.r(19),e.r(21),e.r(9)),s=e.r(20),u=e.r(27);s.register("PriorityModule",function(){var e=[null,["#FF1200","#840023"],["#0074FF","#01467F"],["#00AF00","#006300"],["#FF962E","#B25000"],["#A464FF","#4720C4"],["#A3A3A3","#515151"],["#A3A3A3","#515151"],["#A3A3A3","#515151"],["#A3A3A3","#515151"]],t="M20,10c0,3.866-3.134,7-7,7H7c-3.866,0-7-3.134-7-7V7c0-3.866,3.134-7,7-7h6c3.866,0,7,3.134,7,7V10z",n=o.createClass("PriorityIcon",{base:o.Group,constructor:function(){this.callBase(),this.setSize(20),this.create(),this.setId(i.uuid("node_priority"))},setSize:function(e){this.width=this.height=e},create:function(){var e,n,r;(new o.Path).setPathData(t).fill("white"),e=(new o.Path).setPathData("M0,13c0,3.866,3.134,7,7,7h6c3.866,0,7-3.134,7-7V7H0V13z").setTranslate(.5,.5),n=(new o.Path).setPathData(t).setOpacity(.8).setTranslate(.5,.5),r=(new o.Text).setX(this.width/2-.5).setY(this.height/2).setTextAnchor("middle").setVerticalAlign("middle").setFontItalic(!0).setFontSize(12).fill("white"),this.addShapes([e,n,r]),this.mask=n,this.back=e,this.number=r},setValue:function(t){var n=this.back,r=this.mask,o=this.number,i=e[t];i&&(n.fill(i[1]),r.fill(i[0])),o.setContent(t)}});return{commands:{priority:o.createClass("SetPriorityCommand",{base:a,execute:function(e,t){for(var n=e.getSelectedNodes(),r=0;r<n.length;r++)n[r].setData("priority",t||null).render();e.layout()},queryValue:function(e){for(var t,n=e.getSelectedNodes(),r=0;r<n.length&&!(t=n[r].getData("priority"));r++);return t||null},queryState:function(e){return e.getSelectedNodes().length?0:-1}})},renderers:{left:o.createClass("PriorityRenderer",{base:u,create:function(e){return new n},shouldRender:function(e){return e.getData("priority")},update:function(e,t,n){var r,i,a=t.getData("priority"),s=t.getStyle("space-left");return e.setValue(a),r=n.left-e.width-s,i=-e.height/2,e.setTranslate(r,i),new o.Box({x:r,y:i,width:e.width,height:e.height})}})}}})}},e[57]={value:function(t,n,r){var o=e.r(17),i=e.r(33),a=(e.r(19),e.r(21),e.r(9)),s=e.r(20),u=e.r(27);s.register("ProgressModule",function(){var e=(new o.LinearGradient).pipe(function(e){e.setStartPosition(0,0),e.setEndPosition(0,1),e.addStop(0,"#fff"),e.addStop(1,"#ccc")});this.getPaper().addResource(e);var t=o.createClass("ProgressIcon",{base:o.Group,constructor:function(e){this.callBase(),this.setSize(20),this.create(),this.setValue(e),this.setId(i.uuid("node_progress")),this.translate(.5,.5)},setSize:function(e){this.width=this.height=e},create:function(){var t,n,r,i,a;t=new o.Circle(9).fill("#FFED83"),n=new o.Pie(9,0).fill("#43BC00"),r=(new o.Path).setPathData("M10,3c4.418,0,8,3.582,8,8h1c0-5.523-3.477-10-9-10S1,5.477,1,11h1C2,6.582,5.582,3,10,3z").setTranslate(-10,-10).fill("#8E8E8E"),i=(new o.Path).setTranslate(-10,-10).setPathData("M10,0C4.477,0,0,4.477,0,10c0,5.523,4.477,10,10,10s10-4.477,10-10C20,4.477,15.523,0,10,0zM10,18c-4.418,0-8-3.582-8-8s3.582-8,8-8s8,3.582,8,8S14.418,18,10,18z").fill(e),a=(new o.Path).setTranslate(-10,-10).setPathData("M15.812,7.896l-6.75,6.75l-4.5-4.5L6.25,8.459l2.812,2.803l5.062-5.053L15.812,7.896z").fill("#EEE"),this.addShapes([t,n,r,a,i]),this.pie=n,this.check=a},setValue:function(e){this.pie.setAngle(-360*(e-1)/8),this.check.setVisible(9==e)}});return{commands:{progress:o.createClass("ProgressCommand",{base:a,execute:function(e,t){for(var n=e.getSelectedNodes(),r=0;r<n.length;r++)n[r].setData("progress",t||null).render();e.layout()},queryValue:function(e){for(var t,n=e.getSelectedNodes(),r=0;r<n.length&&!(t=n[r].getData("progress"));r++);return t||null},queryState:function(e){return e.getSelectedNodes().length?0:-1}})},renderers:{left:o.createClass("ProgressRenderer",{base:u,create:function(e){return new t},shouldRender:function(e){return e.getData("progress")},update:function(e,t,n){var r,i,a=t.getData("progress"),s=t.getStyle("space-left");return e.setValue(a),r=n.left-e.width-s,i=-e.height/2,e.setTranslate(r+e.width/2,i+e.height/2),new o.Box(r,i,e.width,e.height)}})}}})}},e[58]={value:function(t,n,r){var o=e.r(17),i=(e.r(33),e.r(19)),a=(e.r(21),e.r(9)),s=e.r(20),u=e.r(27);s.register("Resource",function(){var e,t,n,r,s,c,h,l,d,f,g=(e=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],s=[608135816,2242054355,320440878,57701188,2752067618,698298832,137296536,3964562569,1160258022,953160567,3193202383,887688300,3232508343,3380367581,1065670069,3041331479],f=function(e){return e<0&&(e+=4*(1<<30)),("00000000"+e.toString(16)).slice(-8)},c=[[16,50,84,118,152,186,220,254],[174,132,249,109,193,32,123,53],[139,12,37,223,234,99,23,73],[151,19,205,235,98,165,4,143],[9,117,66,250,30,203,134,211],[194,166,176,56,212,87,239,145],[92,241,222,164,112,54,41,184],[189,231,28,147,5,79,104,162],[246,158,59,128,44,125,65,90],[42,72,103,81,191,233,195,13]],h=function(e,t,n){var r=l[e]^l[t];l[e]=r>>>n|r<<32-n},t=function(e,t,o,i,a){var u=r+c[n][e]%16,f=r+(c[n][e]>>4);o=4+o%4,i=8+i%4,a=12+a%4,l[t%=4]+=l[o]+(d[u]^s[f%16]),h(a,t,16),l[i]+=l[a],h(o,i,12),l[t]+=l[o]+(d[f]^s[u%16]),h(a,t,8),l[i]+=l[a],h(o,i,7)},function(o,i){var a,u,c,h,g,m,p,v;for(i instanceof Array&&4===i.length||(i=[0,0,0,0]),u=e.slice(0),a=s.slice(0,8),n=0;n<4;n+=1)a[n]^=i[n];if(g=(c=16*o.length)%512>446||c%512==0?0:c,c%512==432)o+="";else{for(o+="";o.length%32!=27;)o+="\0";o+=""}for(d=[],v=0;v<o.length;v+=2)d.push(65536*o.charCodeAt(v)+o.charCodeAt(v+1));for(d.push(0),d.push(c),m=d.length-16,p=0,r=0;r<d.length;r+=16){for(p+=512,h=r===m?g:Math.min(c,p),(l=u.concat(a))[12]^=h,l[13]^=h,n=0;n<10;n+=1)for(v=0;v<8;v+=1)v<4?t(v,v,v,v,v):t(v,v,v+1,v+2,v+3);for(v=0;v<8;v+=1)u[v]^=i[v%4]^l[v]^l[v+8]}return u.map(f).join("")}),m=[51,303,75,200,157,0,26,254].map(function(e){return o.Color.createHSL(e,100,85)});o.extendClass(i,{getHashCode:function(e){var t,n=1315423911;for(t=(e=g(e)).length-1;t>=0;t--)n^=(n<<5)+e.charCodeAt(t)+(n>>2);return 2147483647&n},getResourceColor:function(e){var t,n=this._getResourceColorIndexMapping();return Object.prototype.hasOwnProperty.call(n,e)||(t=this._getNextResourceColorIndex(),n[e]=t),m[n[e]]||o.Color.createHSL(Math.floor(this.getHashCode(e)/2147483647*359),100,85)},getUsedResource:function(){var e,t=this._getResourceColorIndexMapping(),n=[];for(e in t)Object.prototype.hasOwnProperty.call(t,e)&&n.push(e);return n},_getNextResourceColorIndex:function(){var e,t,n,r=this._getResourceColorIndexMapping();for(e in t=[],r)Object.prototype.hasOwnProperty.call(r,e)&&t.push(r[e]);for(n=0;n<m.length;n++)if(!~t.indexOf(n))return n;return-1},_getResourceColorIndexMapping:function(){return this._resourceColorMapping||(this._resourceColorMapping={})}});var p=o.createClass("ResourceCommand",{base:a,execute:function(e,t){var n=e.getSelectedNodes();"string"==typeof t&&(t=[t]),n.forEach(function(e){e.setData("resource",t).render()}),e.layout(200)},queryValue:function(e){var t=e.getSelectedNodes(),n=[];return t.forEach(function(e){var t=e.getData("resource");t&&t.forEach(function(e){~n.indexOf(e)||n.push(e)})}),n},queryState:function(e){return e.getSelectedNode()?0:-1}}),v=o.createClass("ResourceOverlay",{base:o.Group,constructor:function(){var e,t;this.callBase(),t=this.rect=(new o.Rect).setRadius(4),e=this.text=(new o.Text).setFontSize(12).setVerticalAlign("middle"),this.addShapes([t,e])},setValue:function(e,t){var n,r,o;n=this.text,e==this.lastResourceName?r=this.lastBox:(n.setContent(e),r=n.getBoundaryBox(),this.lastResourceName=e,this.lastBox=r),n.setX(8).fill(t.dec("l",70)),(o=this.rect).setPosition(0,r.y-4),this.width=Math.round(r.width+16),this.height=Math.round(r.height+8),o.setSize(this.width,this.height),o.fill(t)}});return{commands:{resource:p},renderers:{right:o.createClass("ResourceRenderer",{base:u,create:function(e){return this.overlays=[],new o.Group},shouldRender:function(e){return e.getData("resource")&&e.getData("resource").length},update:function(e,t,n){var r=t.getStyle("space-right"),i=this.overlays,a=t.getData("resource").filter(function(e){return null!==e});if(0!==a.length){var s,u,c,h=t.getMinder();for(c=0,s=0;s<a.length;s++)c+=r,(u=i[s])||(u=new v,i.push(u),e.addShape(u)),u.setVisible(!0),u.setValue(a[s],h.getResourceColor(a[s])),u.setTranslate(c,-1),c+=u.width;for(;u=i[s++];)u.setVisible(!1);return e.setTranslate(n.right,0),new o.Box({x:n.right,y:Math.round(-i[0].height/2),width:c,height:i[0].height})}}})}}})}},e[59]={value:function(t,n,r){var o=e.r(17),i=(e.r(33),e.r(19),e.r(21),e.r(9),e.r(20));e.r(27);i.register("Select",function(){var e,t,n,r=this,i=r.getRenderContainer(),a=(e=null,t=new o.Path,n=!1,{selectStart:function(t){if(!t.originEvent.button&&!t.originEvent.altKey)return e?this.selectEnd():void(e=t.getPosition(i).round())},selectMove:function(a){if("textedit"!=r.getStatus()&&e){var s=e,u=a.getPosition(i);if(!n){if(o.Vector.fromPoints(s,u).length()<10)return;n=!0,i.addShape(t),t.fill(r.getStyle("marquee-background")).stroke(r.getStyle("marquee-stroke")).setOpacity(.8).getDrawer().clear()}var c=new o.Box(s.x,s.y,u.x-s.x,u.y-s.y),h=[];c.left=Math.round(c.left),c.top=Math.round(c.top),c.right=Math.round(c.right),c.bottom=Math.round(c.bottom),t.getDrawer().pipe(function(){this.clear(),this.moveTo(c.left,c.top),this.lineTo(c.right,c.top),this.lineTo(c.right,c.bottom),this.lineTo(c.left,c.bottom),this.close()}),r.getRoot().traverse(function(e){e.getLayoutBox().intersect(c).isEmpty()||h.push(e)}),r.select(h,!0),window.getSelection().removeAllRanges()}},selectEnd:function(r){e&&(e=null),n&&(t.fadeOut(200,"ease",0,function(){t.remove&&t.remove()}),n=!1)}}),s=null,u=null;return{init:function(){window.addEventListener("mouseup",function(){a.selectEnd()})},events:{mousedown:function(e){var t=e.getTargetNode();t?e.isShortcutKey("Ctrl")?this.toggleSelect(t):t.isSelected()?this.isSingleSelect()||(s=t,u=e.getPosition()):this.select(t,!0):(this.removeAllSelectedNodes(),a.selectStart(e),this.setStatus("normal"))},mousemove:a.selectMove,mouseup:function(e){var t=e.getTargetNode();if(t&&t==s){var n=e.getPosition();o.Vector.fromPoints(u,n).length()<1&&this.select(s,!0),s=null}a.selectEnd(e)},"normal.keydown":function(e){if(e.isShortcutKey("ctrl+a")){var t=[];this.getRoot().traverse(function(e){t.push(e)}),this.select(t,!0),e.preventDefault()}}}}})}},e[60]={value:function(t,n,r){var o=e.r(17),i=(e.r(33),e.r(19),e.r(21),e.r(9)),a=e.r(20);e.r(27);a.register("StyleModule",function(){var e=["font-size","font-family","font-weight","font-style","background","color"],t=null;function n(t){for(var n=t.getData(),r=0;r<e.length;r++)if(e[r]in n)return!0}return{commands:{copystyle:o.createClass("CopyStyleCommand",{base:i,execute:function(n){var r=n.getSelectedNode().getData();return t={},e.forEach(function(e){e in r?t[e]=r[e]:(t[e]=null,delete t[e])}),t},queryState:function(e){var t=e.getSelectedNodes();return 1!==t.length?-1:n(t[0])?0:-1}}),pastestyle:o.createClass("PastStyleCommand",{base:i,execute:function(e){return e.getSelectedNodes().forEach(function(e){for(var n in t)t.hasOwnProperty(n)&&e.setData(n,t[n])}),e.renderNodeBatch(e.getSelectedNodes()),e.layout(300),t},queryState:function(e){return t&&e.getSelectedNodes().length?0:-1}}),clearstyle:o.createClass("ClearStyleCommand",{base:i,execute:function(n){return n.getSelectedNodes().forEach(function(t){e.forEach(function(e){t.setData(e)})}),n.renderNodeBatch(n.getSelectedNodes()),n.layout(300),t},queryState:function(e){var t=e.getSelectedNodes();if(!t.length)return-1;for(var r=0;r<t.length;r++)if(n(t[r]))return 0;return-1}})}}})}},e[61]={value:function(t,n,r){var o=e.r(17),i=e.r(33),a=(e.r(19),e.r(21)),s=e.r(9),u=e.r(20),c=e.r(27),h={safari:{",Microsoft YaHei":-.17,",_GB2312,SimKai":-.1,", SimLi":-.1,"comic sans ms":-.23,"impact,chicago":-.15,"times new roman":-.1,"arial black,avant garde":-.17,default:0},ie:{10:{",Microsoft YaHei":-.17,"comic sans ms":-.17,"impact,chicago":-.08,"times new roman":.04,"arial black,avant garde":-.17,default:-.15},11:{",Microsoft YaHei":-.17,"arial,helvetica,sans-serif":-.17,"comic sans ms":-.17,"impact,chicago":-.08,"times new roman":.04,"sans-serif":-.16,"arial black,avant garde":-.17,default:-.15}},edge:{",Microsoft YaHei":-.15,"arial,helvetica,sans-serif":-.17,"comic sans ms":-.17,"impact,chicago":-.08,"sans-serif":-.16,"arial black,avant garde":-.17,default:-.15},sg:{",Microsoft YaHei":-.15,"arial,helvetica,sans-serif":-.05,"comic sans ms":-.22,"impact,chicago":-.16,"times new roman":-.03,"arial black,avant garde":-.22,default:-.15},chrome:{Mac:{"andale mono":-.05,"comic sans ms":-.3,"impact,chicago":-.13,"times new roman":-.1,"arial black,avant garde":-.17,default:0},Win:{",Microsoft YaHei":-.15,"arial,helvetica,sans-serif":-.02,"arial black,avant garde":-.2,"comic sans ms":-.2,"impact,chicago":-.12,"times new roman":-.02,default:-.15},Lux:{"andale mono":-.05,"comic sans ms":-.3,"impact,chicago":-.13,"times new roman":-.1,"arial black,avant garde":-.17,default:0}},firefox:{Mac:{",Microsoft YaHei":-.2,",SimSun":.05,"comic sans ms":-.2,"impact,chicago":-.15,"arial black,avant garde":-.17,"times new roman":-.1,default:.05},Win:{",Microsoft YaHei":-.16,"andale mono":-.17,"arial,helvetica,sans-serif":-.17,"comic sans ms":-.22,"impact,chicago":-.23,"times new roman":-.22,"sans-serif":-.22,"arial black,avant garde":-.17,default:-.16},Lux:{",SimSun":-.2,",Microsoft YaHei":-.2,", SimHei":-.2,", SimLi":-.2,",_GB2312,SimKai":-.2,"andale mono":-.2,"arial,helvetica,sans-serif":-.2,"comic sans ms":-.2,"impact,chicago":-.2,"times new roman":-.2,"sans-serif":-.2,"arial black,avant garde":-.2,default:-.16}}},l=o.createClass("TextRenderer",{base:c,create:function(){return(new o.Group).setId(i.uuid("node_text"))},update:function(e,t){function n(e){return t.getData(e)||t.getStyle(e)}var r,i=t.getText(),a=i?i.split("\n"):[" "],s=t.getStyle("line-height"),u=n("font-size"),c=n("font-family")||"default",l=-(s*u*a.length-(s-1)*u)/2,d=o.Browser;d.chrome||d.opera||d.bd||"chrome"===d.lb?r=h.chrome[d.platform][c]:d.gecko?r=h.firefox[d.platform][c]:d.sg?r=h.sg[c]:d.safari?r=h.safari[c]:d.ie?r=h.ie[d.version][c]:d.edge?r=h.edge[c]:d.lb&&(r=.9),e.setTranslate(0,(r||0)*u);var f=new o.Box,g=Math.round;this.setTextStyle(t,e);var m,p,v,y=a.length,b=e.getItems().length;if(y<b)for(m=y;e.getItem(m);)e.removeItem(m);else if(y>b)for(var w=y-b;w--;)p=(new o.Text).setAttr("text-rendering","inherit"),o.Browser.ie||o.Browser.edge?p.setVerticalAlign("top"):p.setAttr("dominant-baseline","text-before-edge"),e.addItem(p);for(m=0;v=a[m],p=e.getItem(m);m++)p.setContent(v),(o.Browser.ie||o.Browser.edge)&&p.fixPosition();this.setTextStyle(t,e);var x=t.getText()+["font-size","font-name","font-weight","font-style"].map(n).join("/");return t._currentTextHash==x&&t._currentTextGroupBox?t._currentTextGroupBox:(t._currentTextHash=x,function(){e.eachItem(function(e,t){var n=l+e*u*s;t.setY(n);var r=t.getBoundaryBox();f=f.merge(new o.Box(0,n,r.height&&r.width||1,u))});var n=new o.Box(g(f.x),g(f.y),g(f.width),g(f.height));return t._currentTextGroupBox=n,n})},setTextStyle:function(e,t){l._styleHooks.forEach(function(n){n(e,t)})}}),d=o.createClass({base:s,execute:function(e,t){var n=e.getSelectedNode();n&&(n.setText(t),n.render(),e.layout())},queryState:function(e){return 1==e.getSelectedNodes().length?0:-1},queryValue:function(e){var t=e.getSelectedNode();return t?t.getText():null}});i.extend(l,{_styleHooks:[],registerStyleHook:function(e){l._styleHooks.push(e)}}),o.extendClass(a,{getTextGroup:function(){return this.getRenderer("TextRenderer").getRenderShape()}}),u.register("text",{commands:{text:d},renderers:{center:l}}),r.exports=l}},e[62]={value:function(t,n,r){var o=e.r(17),i=(e.r(33),e.r(19),e.r(21),e.r(9)),a=e.r(20),s=(e.r(27),o.createClass("ViewDragger",{constructor:function(e){this._minder=e,this._enabled=!1,this._bind();var t=this;this._minder.getViewDragger=function(){return t},this.setEnabled(!1)},isEnabled:function(){return this._enabled},setEnabled:function(e){var t=this._minder.getPaper();t.setStyle("cursor",e?"pointer":"default"),t.setStyle("cursor",e?"-webkit-grab":"default"),this._enabled=e},timeline:function(){return this._moveTimeline},move:function(e,t){this._minder;var n=this.getMovement().offset(e);this.moveTo(n,t)},moveTo:function(e,t){if(t){var n=this;return this._moveTimeline&&this._moveTimeline.stop(),this._moveTimeline=this._minder.getRenderContainer().animate(new o.Animator(this.getMovement(),e,function(e,t){n.moveTo(t)}),t,"easeOutCubic").timeline(),this._moveTimeline.on("finish",function(){n._moveTimeline=null}),this}this._minder.getRenderContainer().setTranslate(e.round()),this._minder.fire("viewchange")},getMovement:function(){var e=this._minder.getRenderContainer().transform.translate;return e?e[0]:new o.Point},getView:function(){var e=this._minder,t=e._lastClientSize||{width:e.getRenderTarget().clientWidth,height:e.getRenderTarget().clientHeight},n=this.getMovement(),r=new o.Box(0,0,t.width,t.height);return e.getPaper().getViewPortMatrix().inverse().translate(-n.x,-n.y).transformBox(r)},_bind:function(){var e=this,t=!1,n=null,r=null;function i(r){n&&(n=null,r.stopPropagation(),t&&(e.setEnabled(!1),t=!1,"hand"==e._minder.getStatus()&&e._minder.rollbackStatus()),e._minder.getPaper().setStyle("cursor","hand"==e._minder.getStatus()?"-webkit-grab":"default"),e._minder.fire("viewchanged"))}this._minder.on("normal.mousedown normal.touchstart inputready.mousedown inputready.touchstart readonly.mousedown readonly.touchstart",function(e){2==e.originEvent.button&&e.originEvent.preventDefault(),(e.getTargetNode()==this.getRoot()||2==e.originEvent.button||e.originEvent.altKey)&&(n=e.getPosition("view"),t=!0)}).on("normal.mousemove normal.touchmove readonly.mousemove readonly.touchmove inputready.mousemove inputready.touchmove",function(r){("touchmove"==r.type&&r.preventDefault(),t)&&(o.Vector.fromPoints(n,r.getPosition("view")).length()>10&&(this.setStatus("hand",!0),e._minder.getPaper().setStyle("cursor","-webkit-grabbing")))}).on("hand.beforemousedown hand.beforetouchstart",function(t){e.isEnabled()&&(n=t.getPosition("view"),t.stopPropagation(),e._minder.getPaper().setStyle("cursor","-webkit-grabbing"))}).on("hand.beforemousemove hand.beforetouchmove",function(t){if(n){r=t.getPosition("view");var i=o.Vector.fromPoints(n,r);e.move(i),t.stopPropagation(),t.preventDefault(),t.originEvent.preventDefault(),n=r}}).on("mouseup touchend",i),window.addEventListener("mouseup",i),this._minder.on("contextmenu",function(e){e.preventDefault()})}}));a.register("View",function(){return{init:function(){this._viewDragger=new s(this)},commands:{hand:o.createClass("ToggleHandCommand",{base:i,execute:function(e){"hand"!=e.getStatus()?e.setStatus("hand",!0):e.rollbackStatus(),this.setContentChanged(!1)},queryState:function(e){return"hand"==e.getStatus()?1:0},enableReadOnly:!0}),camera:o.createClass("CameraCommand",{base:i,execute:function(e,t){t=t||e.getRoot();var n=e.getPaper().getViewPort(),r=t.getRenderContainer().getRenderBox("view"),i=n.center.x-r.x-r.width/2,a=n.center.y-r.y,s=e._viewDragger,u=e.getOption("viewAnimationDuration");s.move(new o.Point(i,a),u),this.setContentChanged(!1)},enableReadOnly:!0}),move:o.createClass("MoveCommand",{base:i,execute:function(e,t){var n=e._viewDragger,r=e._lastClientSize,i=e.getOption("viewAnimationDuration");switch(t){case"up":n.move(new o.Point(0,r.height/2),i);break;case"down":n.move(new o.Point(0,-r.height/2),i);break;case"left":n.move(new o.Point(r.width/2,0),i);break;case"right":n.move(new o.Point(-r.width/2,0),i)}},enableReadOnly:!0})},events:{statuschange:function(e){this._viewDragger.setEnabled("hand"==e.currentStatus)},mousewheel:function(e){var t,n;if(!(e=e.originEvent).ctrlKey&&!e.shiftKey){"wheelDeltaX"in e?(t=e.wheelDeltaX||0,n=e.wheelDeltaY||0):(t=0,n=e.wheelDelta),this._viewDragger.move({x:t/2.5,y:n/2.5});var r=this;clearTimeout(this._mousewheeltimer),this._mousewheeltimer=setTimeout(function(){r.fire("viewchanged")},100),e.preventDefault()}},"normal.dblclick readonly.dblclick":function(e){e.kityEvent.targetShape instanceof o.Paper&&this.execCommand("camera",this.getRoot(),800)},"paperrender finishInitHook":function(){this.getRenderTarget()&&(this.execCommand("camera",null,0),this._lastClientSize={width:this.getRenderTarget().clientWidth,height:this.getRenderTarget().clientHeight})},resize:function(e){var t={width:this.getRenderTarget().clientWidth,height:this.getRenderTarget().clientHeight},n=this._lastClientSize;this._viewDragger.move(new o.Point((t.width-n.width)/2|0,(t.height-n.height)/2|0)),this._lastClientSize=t},"selectionchange layoutallfinish":function(e){var t=this.getSelectedNode(),n=this;if(o.Browser.edge&&this.fire("paperrender"),t){var r=this._viewDragger,i=r.timeline();if(i)i.on("finish",function(){n.fire("selectionchange")});else{var a=r.getView(),s=t.getLayoutBox(),u=0,c=0;s.right>a.right?u+=a.right-s.right-50:s.left<a.left&&(u+=a.left-s.left+50),s.bottom>a.bottom&&(c+=a.bottom-s.bottom-50),s.top<a.top&&(c+=a.top-s.top+50),(u||c)&&r.move(new o.Point(u,c),100)}}}}}})}},e[63]={value:function(t,n,r){var o=e.r(17),i=(e.r(33),e.r(19)),a=(e.r(21),e.r(9)),s=e.r(20);e.r(27);s.register("Zoom",function(){var e,t=this;function n(){var e=t._zoomValue>=100?"optimize-speed":"geometricPrecision";t.getRenderContainer().setAttr("text-rendering",e)}function r(t,r){t.getPaper().getViewPort();if(r){n();var i=t.getOption("zoomAnimationDuration");if(t.getRoot().getComplex()>200||!i)t._zoomValue=r,t.zoom(r),t.fire("viewchange");else{var a=new o.Animator({beginValue:t._zoomValue,finishValue:r,setter:function(e,t){e.zoom(t)}});t._zoomValue=r,e&&e.pause(),(e=a.start(t,i,"easeInOutSine")).on("finish",function(){t.fire("viewchange")})}t.fire("zoom",{zoom:r})}}o.extendClass(i,{zoom:function(e){var t=this.getPaper(),n=t.getViewPort();n.zoom=e/100,n.center={x:n.center.x,y:n.center.y},t.setViewPort(n),100==e&&function(e){var t=e.shapeNode,n=t.getCTM(),r=new o.Matrix(n.a,n.b,n.c,n.d,.5+(0|n.e),.5+(0|n.f));t.setAttribute("transform","matrix("+r.toString()+")")}(t)},getZoomValue:function(){return this._zoomValue}});var s=o.createClass("Zoom",{base:a,execute:r,queryValue:function(e){return e._zoomValue}});return{init:function(){this._zoomValue=100,this.setDefaultOptions({zoom:[10,20,50,100,200]}),n()},commands:{zoomin:o.createClass("ZoomInCommand",{base:a,execute:function(e){r(e,this.nextValue(e))},queryState:function(e){return+!this.nextValue(e)},nextValue:function(e){var t,n=e.getOption("zoom");for(t=0;t<n.length;t++)if(n[t]>e._zoomValue)return n[t];return 0},enableReadOnly:!0}),zoomout:o.createClass("ZoomOutCommand",{base:a,execute:function(e){r(e,this.nextValue(e))},queryState:function(e){return+!this.nextValue(e)},nextValue:function(e){var t,n=e.getOption("zoom");for(t=n.length-1;t>=0;t--)if(n[t]<e._zoomValue)return n[t];return 0},enableReadOnly:!0}),zoom:s},events:{"normal.mousewheel readonly.mousewheel":function(e){if(e.originEvent.ctrlKey||e.originEvent.metaKey){var t=e.originEvent.wheelDelta,n=this;o.Browser.mac||(t=-t),Math.abs(t)>100&&(clearTimeout(this._wheelZoomTimeout),this._wheelZoomTimeout=setTimeout(function(){n.getPaper()._zoom;t<0?n.execCommand("zoomin"):t>0&&n.execCommand("zoomout")},100),e.originEvent.preventDefault())}}},commandShortcutKeys:{zoomin:"ctrl+=",zoomout:"ctrl+-"}}})}},e[64]={value:function(t,n,r){e.r(12).registerProtocol("json",r.exports={fileDescription:"KityMinder ",fileExtension:".km",dataType:"text",mineType:"application/json",encode:function(e){return JSON.stringify(e)},decode:function(e){return JSON.parse(e)}})}},e[65]={value:function(t,n,r){var o=e.r(12),i=/\r\n|\r|\n/,a="",s="\x3c!--Note--\x3e",u="\x3c!--/Note--\x3e";function c(e){return function e(t,n){var r=[];n=n||1;var o=function(e){var t="";for(;e--;)t+="#";return t}(n);r.push(o+" "+t.data.text);r.push(a);var i=t.data.note;if(i){var c=/^#/.test(i);c&&(r.push(s),i=i.replace(/^#+/gm,function(e){return o+e})),r.push(i),c&&r.push(u),r.push(a)}t.children&&t.children.forEach(function(t){r=r.concat(e(t,n+1))});return r}(e,1).join("\n")}function h(e,t){var n={data:{text:e,note:""}};return t&&(t.children?t.children.push(n):t.children=[n]),n}function l(e,t){e.data.note+=t+"\n"}function d(e){var t=/^(#+)?\s*(.*)$/.exec(e);return{level:t[1]&&t[1].length||null,content:t[2],noteStart:e==s,noteClose:e==u,codeBlock:/^\s*```/.test(e)}}function f(e){if(/\S/.test(e.data.note)){for(var t=e.data.note.split("\n");t.length&&!/\S/.test(t[0]);)t.shift();for(;t.length&&!/\S/.test(t[t.length-1]);)t.pop();e.data.note=t.join("\n")}else e.data.note=null,delete e.data.note;e.children&&e.children.forEach(f)}o.registerProtocol("markdown",r.exports={fileDescription:"Markdown/GFM ",fileExtension:".md",mineType:"text/markdown",dataType:"text",encode:function(e){return c(e.root)},decode:function(e){return function(e){var t,n,r,o,a,s,u,c={};t=(e=e.replace(/^(.+)\n={3,}/,function(e,t){return"# "+t})).split(i);for(var g=0;g<t.length;g++)(r=d(n=t[g])).noteClose?s=!1:r.noteStart?s=!0:(u=r.codeBlock?!u:u,s||u||!r.level||r.level>o+1?a&&l(a,n):(o=r.level,a=h(r.content,c[o-1]),c[o]=a));return f(c[1]),c[1]}(e)}})}},e[66]={value:function(t,n,r){var o=e.r(17),i=e.r(12),a=e.r(25),s=window.URL||window.webkitURL||window;function u(e,t){return new a(function(t,n){var r=document.createElement("img");r.onload=function(){t({element:this,x:e.x,y:e.y,width:e.width,height:e.height})},r.onerror=function(e){n(e)},r.crossOrigin="anonymous",r.src=e.url})}i.registerProtocol("png",r.exports={fileDescription:"PNG ",fileExtension:".png",mineType:"image/png",dataType:"base64",encode:function(e,t,n){var r=document.createElement("canvas"),i=r.getContext("2d"),c=t.getStyle("background").toString(),h=/url\(\"(.+)\"\)/.exec(c),l=o.Color.parse(c),d=function(e){var t,n,r,o,i,a,u=e.getPaper(),c=(u.container,e.getRenderContainer()),h=c.getRenderBox(),l=h.width+1,d=h.height+1;t=u.shapeNode.getAttribute("transform"),u.shapeNode.setAttribute("transform","translate(0.5, 0.5)"),c.translate(-h.x,-h.y),n=u.container.innerHTML,c.translate(h.x,h.y),u.shapeNode.setAttribute("transform",t),(r=document.createElement("div")).innerHTML=n,(o=r.querySelector("svg")).setAttribute("width",h.width+1),o.setAttribute("height",h.height+1),o.setAttribute("style",'font-family: Arial, "Microsoft Yahei","Heiti SC";'),(r=document.createElement("div")).appendChild(o),n=(n=(n=(n=r.innerHTML).replace(' xmlns="http://www.w3.org/2000/svg" xmlns:NS1="" NS1:ns1:xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:NS2="" NS2:xmlns:ns1=""',"")).replace(/&nbsp;|[\x00-\x1F\x7F-\x9F]/g,"")).replace(/NS\d+:title/gi,"xlink:title"),i=new Blob([n],{type:"image/svg+xml"}),a=s.createObjectURL(i);var f=[];return function t(n){var r=n.data;if(r.image){e.renderNode(n);var r=n.data,o=r.image,i=r.imageSize,a=n.getRenderBox("ImageRenderer",e.getRenderContainer()),s={url:o,width:i.width,height:i.height,x:-c.getBoundaryBox().x+a.x,y:-c.getBoundaryBox().y+a.y};f.push(s)}if("collapse"!==r.expandState)for(var u=n.getChildren(),h=0;h<u.length;h++)t(u[h])}(e.getRoot()),{width:l,height:d,dataUrl:a,xml:n,imagesInfo:f}}(t),f=n&&n.width&&n.width>d.width?n.width:d.width,g=n&&n.height&&n.height>d.height?n.height:d.height,m=n&&n.width&&n.width>d.width?(n.width-d.width)/2:0,p=n&&n.height&&n.height>d.height?(n.height-d.height)/2:0,v=d.dataUrl,y=d.imagesInfo,b=20;function w(e,t){e.save(),e.fillStyle=t,e.fillRect(0,0,r.width,r.height),e.restore()}function x(e,t,n,r,o,i){o&&i?e.drawImage(t,n+b,r+b,o,i):e.drawImage(t,n+b,r+b)}function S(e){return e.toDataURL("image/png")}function C(e){var t=e.map(function(e){return t=e,a(function(e,n){var r=new XMLHttpRequest;r.open("GET",t.url+"?_="+Date.now(),!0),r.responseType="blob",r.onreadystatechange=function(){if(4===r.readyState&&200===r.status){var n=r.response,o=document.createElement("img");o.src=s.createObjectURL(n),o.onload=function(){s.revokeObjectURL(o.src),e({element:o,x:t.x,y:t.y,width:t.width,height:t.height})}}},r.send()});var t});return a.all(t)}function _(){return u({url:v}).then(function(e){return x(i,e.element,m,p,e.width,e.height),C(y)}).then(function(e){for(var t=0;t<e.length;t++)x(i,e[t].element,e[t].x+m,e[t].y+p,e[t].width,e[t].height);s.revokeObjectURL(v),document.body.appendChild(r);var n=S(r);return document.body.removeChild(r),n},function(e){alert(" png "),s.revokeObjectURL(v),document.body.appendChild(r);var t=S(r);return document.body.removeChild(r),t})}return r.width=f+2*b,r.height=g+2*b,h?u({url:h[1]}).then(function(e){return w(i,i.createPattern(e.element,"repeat")),_()}):(w(i,l.toString()),_())}})}},e[67]={value:function(t,n,r){function o(e,t,n){e.style.visibility="hidden",function e(t,n,r){if(t&&"defs"!==t.tagName){if("transparent"===t.getAttribute("fill")&&t.setAttribute("fill","none"),t.getAttribute("marker-end")&&t.removeAttribute("marker-end"),n=n||0,r=r||0,t.getAttribute("transform")){var o=function(e,t){var n;try{n=t.getScreenCTM().inverse()}catch(e){throw new Error("Can not inverse source element' ctm.")}return n.multiply(e.getScreenCTM())}(t,t.parentElement);n-=o.e,r-=o.f,t.removeAttribute("transform")}switch(t.tagName.toLowerCase()){case"g":break;case"path":var i=t.getAttribute("d");return void(i&&(i=function(e,t){t instanceof Function||(t=function(){});for(var n=[],r=[],o=[],i=0,a=e.length;i<a;i++)switch(e[i]){case"M":case"L":case"T":case"S":case"A":case"C":case"H":case"V":case"Q":o.length&&(r.push(o.join("")),o=[]),","===r[r.length-1]&&r.pop(),r.length&&(t(r),n.push(r.join("")),r=[]),r.push(e[i]);break;case"Z":case"z":r.push(o.join(""),e[i]),t(r),n.push(r.join("")),o=[],r=[];break;case".":case"e":o.push(e[i]);break;case"-":"e"!==e[i-1]&&(o.length&&r.push(o.join(""),","),o=[]),o.push("-");break;case" ":case",":o.length&&(r.push(o.join(""),","),o=[]);break;default:/\d/.test(e[i])?o.push(e[i]):o.length?(r.push(o.join(""),e[i]),o=[]):(","===r[r.length-1]&&r.pop(),r.push(e[i])),i+1===a&&(o.length&&r.push(o.join("")),t(r),n.push(r.join("")),o=null,r=null)}return n.join("")}(i,function(e){switch(e[0]){case"V":e[1]=+e[1]-r;break;case"H":e[1]=+e[1]-n;break;case"M":case"L":case"T":e[1]=+e[1]-n,e[3]=+e[3]-r;break;case"Q":case"S":e[1]=+e[1]-n,e[3]=+e[3]-r,e[5]=+e[5]-n,e[7]=+e[7]-r;break;case"A":e[11]=+e[11]-n,e[13]=+e[13]-r;break;case"C":e[1]=+e[1]-n,e[3]=+e[3]-r,e[5]=+e[5]-n,e[7]=+e[7]-r,e[9]=+e[9]-n,e[11]=+e[11]-r}}),t.setAttribute("d",i),t.removeAttribute("transform")));case"image":case"text":if(n&&r){var a=+t.getAttribute("x")||0,s=+t.getAttribute("y")||0;t.setAttribute("x",a-n),t.setAttribute("y",s-r)}return t.getAttribute("dominant-baseline")&&(t.removeAttribute("dominant-baseline"),t.setAttribute("dy",".8em")),void t.removeAttribute("transform")}if(t.children)for(var u=0,c=t.children.length;u<c;u++)e(t.children[u],n,r)}}(e,t||0,n||0),e.style.visibility="visible"}e.r(12).registerProtocol("svg",r.exports={fileDescription:"SVG ",fileExtension:".svg",mineType:"image/svg+xml",dataType:"text",encode:function(e,t){var n,r,i,a=t.getPaper(),s=a.shapeNode.getAttribute("transform"),u=t.getRenderContainer(),c=u.getRenderBox(),h=(u.getTransform(),c.width),l=c.height;return a.shapeNode.setAttribute("transform","translate(0.5, 0.5)"),n=a.container.innerHTML,a.shapeNode.setAttribute("transform",s),r=document.createElement("div"),document.body.appendChild(r),r.innerHTML=n,(i=r.querySelector("svg")).setAttribute("width",h+40|0),i.setAttribute("height",l+40|0),i.setAttribute("style","background: "+t.getStyle("background")),i.setAttribute("viewBox",[0,0,h+40|0,l+40|0].join(" ")),tempSvgContainer=document.createElement("div"),o(i,c.x-20|0,c.y-20|0),document.body.removeChild(r),tempSvgContainer.appendChild(i),n=(n=tempSvgContainer.innerHTML).replace(/&nbsp;/g,"&#xa0;")}})}},e[68]={value:function(t,n,r){var o=e.r(12),i=e.r(17).Browser,a="\r",s=/\r\n|\r|\n/,u=function(e){return e.gecko?{REGEXP:new RegExp("^(\t|"+String.fromCharCode(160,160,32,160)+")"),DELETE:new RegExp("^(\t|"+String.fromCharCode(160,160,32,160)+")+")}:e.ie||e.edge?{REGEXP:new RegExp("^("+String.fromCharCode(32)+"|"+String.fromCharCode(160)+")"),DELETE:new RegExp("^("+String.fromCharCode(32)+"|"+String.fromCharCode(160)+")+")}:{REGEXP:/^(\t|\x20{4})/,DELETE:/^(\t|\x20{4})+/}}(i);function c(e){if(!e)return"";for(var t=[],n=["\\","\\","n"],r=0,o=0,i=e.length;r<i;r++)if(e[r]!==n[o])switch(o){case 0:t.push(e[r]),o=0;break;case 1:"n"===e[r]?t.push("\n"):t.push(e[r-1],e[r]),o=0;break;case 2:t.push(e[r-2]),"\\"!==e[r]&&(o=0,t.push(e[r-1],e[r]))}else 3===++o&&(o=0,t.push("\\n"));return t.join("")}function h(e,t){var n="";return n+=function(e,t){for(var n="";t--;)n+=e;return n}("\t",t=t||0),n+=function(e){if(!e)return"";for(var t=[],n=["\\","n"],r=0,o=0,i=e.length;r<i;r++)if("\n"!==e[r]&&"\r"!==e[r])if(e[r]!==n[o]){switch(o){case 0:t.push(e[r]);break;case 1:t.push(e[r-1],e[r])}o=0}else 2==++o&&(o=0,t.push("\\\\n"));else t.push("\\n"),o=0;return t.join("")}(e.data.text)+a,e.children&&e.children.forEach(function(e){n+=h(e,t+1)}),n}function l(e){return!/\S/.test(e)}function d(e){for(var t=0;u.REGEXP.test(e);)e=e.replace(u.REGEXP,""),t++;return t}function f(e){return{data:{text:c(e.replace(u.DELETE,""))}}}o.registerProtocol("text",r.exports={fileDescription:"",fileExtension:".txt",dataType:"text",mineType:"text/plain",encode:function(e){return h(e.root,0)},decode:function(e){return function(e){for(var t,n,r,o,i,a,u={},c=e.split(s),h=0;h<c.length;h++)if(!l(n=c[h])){if(r=d(n),o=f(n),0===r){if(t)throw new Error("Invalid local format");t=o}else{if(!u[r-1])throw new Error("Invalid local format");i=u[r-1],a=o,(i.children||(i.children=[])).push(a)}u[r]=o}return t}(e)},Node2Text:function(e){return function(e){if(e)return/^\s*$/.test(e.data.text)&&(e.data.text=""),h(function e(t){var n={};n.data=t.getData();var r=t.getChildren();n.children=[];for(var o=0;o<r.length;o++)n.children.push(e(r[o]));return n}(e))}(e)}})}},e[69]={value:function(t,n,r){e.r(31).register("default",{getLayout:function(e){if(e.getData("layout"))return e.getData("layout");var t=e.getLevel();return 0===t?"mind":1===t?e.getLayoutPointPreview().x>0?"right":"left":e.parent.getLayout()},getConnect:function(e){return 1==e.getLevel()?"arc":"under"}})}},e[70]={value:function(t,n,r){e.r(31).register("filetree",{getLayout:function(e){return e.getData("layout")?e.getData("layout"):e.isRoot()?"bottom":"filetree-down"},getConnect:function(e){return 1==e.getLevel()?"poly":"l"}})}},e[71]={value:function(t,n,r){e.r(31).register("fish-bone",{getLayout:function(e){if(e.getData("layout"))return e.getData("layout");var t=e.getLevel();return 0===t?"fish-bone-master":1===t?"fish-bone-slave":e.getLayoutPointPreview().y>0?"filetree-up":"filetree-down"},getConnect:function(e){switch(e.getLevel()){case 1:return"fish-bone-master";case 2:return"line";default:return"l"}}})}},e[72]={value:function(t,n,r){e.r(31).register("right",{getLayout:function(e){return e.getData("layout")||"right"},getConnect:function(e){return 1==e.getLevel()?"arc":"bezier"}})}},e[73]={value:function(t,n,r){e.r(31).register("structure",{getLayout:function(e){return e.getData("layout")||"bottom"},getConnect:function(e){return"poly"}})}},e[74]={value:function(t,n,r){e.r(31).register("tianpan",{getLayout:function(e){return e.getData("layout")?e.getData("layout"):0===e.getLevel()?"tianpan":e.parent.getLayout()},getConnect:function(e){return"arc_tp"}})}},e[75]={value:function(t,n,r){var o=e.r(32);["classic","classic-compact"].forEach(function(e){var t="classic-compact"==e;o.register(e,{background:'#3A4144 url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAIAAAACDbGyAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyRpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoTWFjaW50b3NoKSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDowQzg5QTQ0NDhENzgxMUUzOENGREE4QTg0RDgzRTZDNyIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDowQzg5QTQ0NThENzgxMUUzOENGREE4QTg0RDgzRTZDNyI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkMwOEQ1NDRGOEQ3NzExRTM4Q0ZEQThBODREODNFNkM3IiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOkMwOEQ1NDUwOEQ3NzExRTM4Q0ZEQThBODREODNFNkM3Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+e9P33AAAACVJREFUeNpisXJ0YUACTAyoAMr/+eM7EGGRZ4FQ7BycEAZAgAEAHbEGtkoQm/wAAAAASUVORK5CYII=") repeat',"root-color":"#430","root-background":"#e9df98","root-stroke":"#e9df98","root-font-size":24,"root-padding":t?[10,25]:[15,25],"root-margin":t?[15,25]:[30,100],"root-radius":30,"root-space":10,"root-shadow":"rgba(0, 0, 0, .25)","main-color":"#333","main-background":"#a4c5c0","main-stroke":"#a4c5c0","main-font-size":16,"main-padding":t?[5,15]:[6,20],"main-margin":t?[5,10]:20,"main-radius":10,"main-space":5,"main-shadow":"rgba(0, 0, 0, .25)","sub-color":"white","sub-background":"transparent","sub-stroke":"none","sub-font-size":12,"sub-padding":[5,10],"sub-margin":t?[5,10]:[15,20],"sub-tree-margin":30,"sub-radius":5,"sub-space":5,"connect-color":"white","connect-width":2,"main-connect-width":3,"connect-radius":5,"selected-background":"rgb(254, 219, 0)","selected-stroke":"rgb(254, 219, 0)","selected-color":"black","marquee-background":"rgba(255,255,255,.3)","marquee-stroke":"white","drop-hint-color":"yellow","sub-drop-hint-width":2,"main-drop-hint-width":4,"root-drop-hint-width":4,"order-hint-area-color":"rgba(0, 255, 0, .5)","order-hint-path-color":"#0f0","order-hint-path-width":1,"text-selection-color":"rgb(27,171,255)","line-height":1.5})})}},e[76]={value:function(t,n,r){e.r(32).register("fish",{background:'#3A4144 url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAIAAAACDbGyAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyRpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoTWFjaW50b3NoKSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDowQzg5QTQ0NDhENzgxMUUzOENGREE4QTg0RDgzRTZDNyIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDowQzg5QTQ0NThENzgxMUUzOENGREE4QTg0RDgzRTZDNyI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkMwOEQ1NDRGOEQ3NzExRTM4Q0ZEQThBODREODNFNkM3IiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOkMwOEQ1NDUwOEQ3NzExRTM4Q0ZEQThBODREODNFNkM3Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+e9P33AAAACVJREFUeNpisXJ0YUACTAyoAMr/+eM7EGGRZ4FQ7BycEAZAgAEAHbEGtkoQm/wAAAAASUVORK5CYII=") repeat',"root-color":"#430","root-background":"#e9df98","root-stroke":"#e9df98","root-font-size":24,"root-padding":[35,35],"root-margin":30,"root-radius":100,"root-space":10,"root-shadow":"rgba(0, 0, 0, .25)","main-color":"#333","main-background":"#a4c5c0","main-stroke":"#a4c5c0","main-font-size":16,"main-padding":[6,20],"main-margin":[20,20],"main-radius":5,"main-space":5,"main-shadow":"rgba(0, 0, 0, .25)","sub-color":"black","sub-background":"white","sub-stroke":"white","sub-font-size":12,"sub-padding":[5,10],"sub-margin":[10],"sub-radius":5,"sub-space":5,"connect-color":"white","connect-width":3,"main-connect-width":3,"connect-radius":5,"selected-background":"rgb(254, 219, 0)","selected-stroke":"rgb(254, 219, 0)","marquee-background":"rgba(255,255,255,.3)","marquee-stroke":"white","drop-hint-color":"yellow","drop-hint-width":4,"order-hint-area-color":"rgba(0, 255, 0, .5)","order-hint-path-color":"#0f0","order-hint-path-width":1,"text-selection-color":"rgb(27,171,255)","line-height":1.5})}},e[77]={value:function(t,n,r){var o=e.r(17),i=e.r(32);function a(e,t,n){return o.Color.createHSL(e,t,n)}function s(e,t){return{background:"#fbfbfb","root-color":"white","root-background":a(e,37,60),"root-stroke":a(e,37,60),"root-font-size":16,"root-padding":t?[6,12]:[12,24],"root-margin":t?10:[30,100],"root-radius":5,"root-space":10,"main-color":"black","main-background":a(e,33,95),"main-stroke":a(e,37,60),"main-stroke-width":1,"main-font-size":14,"main-padding":[6,20],"main-margin":t?8:20,"main-radius":3,"main-space":5,"sub-color":"black","sub-background":"transparent","sub-stroke":"none","sub-font-size":12,"sub-padding":t?[3,5]:[5,10],"sub-margin":t?[4,8]:[15,20],"sub-radius":5,"sub-space":5,"connect-color":a(e,37,60),"connect-width":1,"connect-radius":5,"selected-stroke":a(e,26,30),"selected-stroke-width":"3","blur-selected-stroke":a(e,10,60),"marquee-background":a(e,100,80).set("a",.1),"marquee-stroke":a(e,37,60),"drop-hint-color":a(e,26,35),"drop-hint-width":5,"order-hint-area-color":a(e,100,30).set("a",.5),"order-hint-path-color":a(e,100,25),"order-hint-path-width":1,"text-selection-color":a(e,100,20),"line-height":1.5}}var u,c={red:0,soil:25,green:122,blue:204,purple:246,pink:334};for(u in c)i.register("fresh-"+u,s(c[u])),i.register("fresh-"+u+"-compat",s(c[u],!0))}},e[78]={value:function(t,n,r){var o=e.r(32);["snow","snow-compact"].forEach(function(e){var t="snow-compact"==e;o.register(e,{background:'#3A4144 url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAIAAAACDbGyAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyRpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoTWFjaW50b3NoKSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDowQzg5QTQ0NDhENzgxMUUzOENGREE4QTg0RDgzRTZDNyIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDowQzg5QTQ0NThENzgxMUUzOENGREE4QTg0RDgzRTZDNyI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkMwOEQ1NDRGOEQ3NzExRTM4Q0ZEQThBODREODNFNkM3IiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOkMwOEQ1NDUwOEQ3NzExRTM4Q0ZEQThBODREODNFNkM3Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+e9P33AAAACVJREFUeNpisXJ0YUACTAyoAMr/+eM7EGGRZ4FQ7BycEAZAgAEAHbEGtkoQm/wAAAAASUVORK5CYII=") repeat',"root-color":"#430","root-background":"#e9df98","root-stroke":"#e9df98","root-font-size":24,"root-padding":t?[5,10]:[15,25],"root-margin":t?15:30,"root-radius":5,"root-space":10,"root-shadow":"rgba(0, 0, 0, .25)","main-color":"#333","main-background":"#a4c5c0","main-stroke":"#a4c5c0","main-font-size":16,"main-padding":t?[4,10]:[6,20],"main-margin":t?[5,10]:[20,40],"main-radius":5,"main-space":5,"main-shadow":"rgba(0, 0, 0, .25)","sub-color":"black","sub-background":"white","sub-stroke":"white","sub-font-size":12,"sub-padding":[5,10],"sub-margin":t?[5,10]:[10,20],"sub-radius":5,"sub-space":5,"connect-color":"white","connect-width":2,"main-connect-width":3,"connect-radius":5,"selected-background":"rgb(254, 219, 0)","selected-stroke":"rgb(254, 219, 0)","marquee-background":"rgba(255,255,255,.3)","marquee-stroke":"white","drop-hint-color":"yellow","drop-hint-width":4,"order-hint-area-color":"rgba(0, 255, 0, .5)","order-hint-path-color":"#0f0","order-hint-path-width":1,"text-selection-color":"rgb(27,171,255)","line-height":1.5})})}},e[79]={value:function(t,n,r){var o=e.r(32);["tianpan","tianpan-compact"].forEach(function(e){var t="tianpan-compact"==e;o.register(e,{background:'#3A4144 url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAIAAAACDbGyAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyRpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoTWFjaW50b3NoKSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDowQzg5QTQ0NDhENzgxMUUzOENGREE4QTg0RDgzRTZDNyIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDowQzg5QTQ0NThENzgxMUUzOENGREE4QTg0RDgzRTZDNyI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkMwOEQ1NDRGOEQ3NzExRTM4Q0ZEQThBODREODNFNkM3IiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOkMwOEQ1NDUwOEQ3NzExRTM4Q0ZEQThBODREODNFNkM3Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+e9P33AAAACVJREFUeNpisXJ0YUACTAyoAMr/+eM7EGGRZ4FQ7BycEAZAgAEAHbEGtkoQm/wAAAAASUVORK5CYII=") repeat',"root-color":"#430","root-background":"#e9df98","root-stroke":"#e9df98","root-font-size":25,"root-padding":t?15:20,"root-margin":t?[15,25]:100,"root-radius":30,"root-space":10,"root-shadow":"rgba(0, 0, 0, .25)","root-shape":"circle","main-color":"#333","main-background":"#a4c5c0","main-stroke":"#a4c5c0","main-font-size":15,"main-padding":t?10:12,"main-margin":t?10:12,"main-radius":10,"main-space":5,"main-shadow":"rgba(0, 0, 0, .25)","main-shape":"circle","sub-color":"#333","sub-background":"#99ca6a","sub-stroke":"#a4c5c0","sub-font-size":13,"sub-padding":5,"sub-margin":t?6:10,"sub-tree-margin":30,"sub-radius":5,"sub-space":5,"sub-shadow":"rgba(0, 0, 0, .25)","sub-shape":"circle","connect-color":"white","connect-width":2,"main-connect-width":3,"connect-radius":5,"selected-background":"rgb(254, 219, 0)","selected-stroke":"rgb(254, 219, 0)","selected-color":"black","marquee-background":"rgba(255,255,255,.3)","marquee-stroke":"white","drop-hint-color":"yellow","sub-drop-hint-width":2,"main-drop-hint-width":4,"root-drop-hint-width":4,"order-hint-area-color":"rgba(0, 255, 0, .5)","order-hint-path-color":"#0f0","order-hint-path-width":1,"text-selection-color":"rgb(27,171,255)","line-height":1.4})})}},e[80]={value:function(t,n,r){e.r(32).register("wire",{background:"black",color:"#999",stroke:"none",padding:10,margin:20,"font-size":14,"connect-color":"#999","connect-width":1,"selected-background":"#999","selected-color":"black","marquee-background":"rgba(255,255,255,.3)","marquee-stroke":"white","drop-hint-color":"yellow","sub-drop-hint-width":2,"main-drop-hint-width":4,"root-drop-hint-width":4,"order-hint-area-color":"rgba(0, 255, 0, .5)","order-hint-path-color":"#0f0","order-hint-path-width":1,"text-selection-color":"rgb(27,171,255)","line-height":1.5})}};var t,n={"expose-kityminder":34};t="expose-kityminder",e.r([n[t]])}();